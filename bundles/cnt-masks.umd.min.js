!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@angular/core"),require("angular2-text-mask"),require("@angular/common"),require("@angular/forms"),require("text-mask-core/dist/textMaskCore")):"function"==typeof define&&define.amd?define("cnt-masks",["exports","@angular/core","angular2-text-mask","@angular/common","@angular/forms","text-mask-core/dist/textMaskCore"],e):e((t=t||self)["cnt-masks"]={},t.ng.core,t.angular2TextMask,t.ng.common,t.ng.forms,t.textMaskCore)}(this,(function(t,e,r,n,a,i){"use strict";var o=function(){function t(){}return t.prototype.transform=function(t){return"number"!=typeof t&&(t+=""),"string"!=typeof t?t:(3===t.length&&(t="0"+t),t.substring(0,2)+"/"+t.substring(2))},t}();o.decorators=[{type:e.Pipe,args:[{name:"cardExpiration"}]}];var s=function(){function t(){}return t.prototype.transform=function(t){return t},t}();s.decorators=[{type:e.Pipe,args:[{name:"cardExpiration"}]}];Object.create;function u(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}var c,l;Object.create;var p=[].indexOf||function(t){for(var e=0,r=this.length;e<r;e++)if(e in this&&this[e]===t)return e;return-1};function f(t){var e,r,n,a=(t+"").replace(/\D/g,"");for(r=0,n=c.length;r<n;r++)if((e=c[r]).pattern.test(a))return e}function d(t){var e,r,n;for(r=0,n=c.length;r<n;r++)if((e=c[r]).type===t)return e}function h(t){try{if(t&&null!=t.selectionStart&&t.selectionStart!==t.selectionEnd)return!0}catch(t){t}return!1}function v(t,e,r){var n,a,i,o;if(t.length)try{for(var s=u(Array.from(t)),c=s.next();!c.done;c=s.next()){v(c.value,e,r)}}catch(t){n={error:t}}finally{try{c&&!c.done&&(a=s.return)&&a.call(s)}finally{if(n)throw n.error}}else{if(!e.match(" "))return t.addEventListener?t.addEventListener(e,r,!1):t.attachEvent?(e="on"+e,t.attachEvent(e,r)):void(t["on"+e]=r);try{for(var l=u(Array.from(e.split(" "))),p=l.next();!p.done;p=l.next()){v(t,p.value,r)}}catch(t){i={error:t}}finally{try{p&&!p.done&&(o=l.return)&&o.call(l)}finally{if(i)throw i.error}}}}function m(t,e,r){var n;try{n=new CustomEvent(e,{detail:r})}catch(t){(n=document.createEvent("CustomEvent")).initCustomEvent?n.initCustomEvent(e,!0,!0,r):n.initEvent(e,!0,!0,r)}return t.dispatchEvent(n)}c=[{type:"amex",pattern:/^3[47]/,format:/(\d{1,4})(\d{1,6})?(\d{1,5})?/,length:[15],cvcLength:[4],luhn:!0},{type:"dankort",pattern:/^5019/,format:l=/(\d{1,4})/g,length:[16],cvcLength:[3],luhn:!0},{type:"hipercard",pattern:/^(384100|384140|384160|606282|637095|637568|60(?!11))/,format:l,length:[14,15,16,17,18,19],cvcLength:[3],luhn:!0},{type:"dinersclub",pattern:/^(36|38|30[0-5])/,format:/(\d{1,4})(\d{1,6})?(\d{1,4})?/,length:[14],cvcLength:[3],luhn:!0},{type:"discover",pattern:/^(6011|65|64[4-9]|622)/,format:l,length:[16],cvcLength:[3],luhn:!0},{type:"jcb",pattern:/^35/,format:l,length:[16],cvcLength:[3],luhn:!0},{type:"laser",pattern:/^(6706|6771|6709)/,format:l,length:[16,17,18,19],cvcLength:[3],luhn:!0},{type:"maestro",pattern:/^(5018|5020|5038|6304|6703|6708|6759|676[1-3])/,format:l,length:[12,13,14,15,16,17,18,19],cvcLength:[3],luhn:!0},{type:"mastercard",pattern:/^(5[1-5]|677189)|^(222[1-9]|2[3-6]\d{2}|27[0-1]\d|2720)/,format:l,length:[16],cvcLength:[3],luhn:!0},{type:"unionpay",pattern:/^62/,format:l,length:[16,17,18,19],cvcLength:[3],luhn:!1},{type:"visaelectron",pattern:/^4(026|17500|405|508|844|91[37])/,format:l,length:[16],cvcLength:[3],luhn:!0},{type:"elo",pattern:/^(4011(78|79)|43(1274|8935)|45(1416|7393|763(1|2))|50(4175|6699|67[0-7][0-9]|9000)|627780|63(6297|6368)|650(03([^4])|04([0-9])|05(0|1)|4(0[5-9]|3[0-9]|8[5-9]|9[0-9])|5([0-2][0-9]|3[0-8])|9([2-6][0-9]|7[0-8])|541|700|720|901)|651652|655000|655021)/,format:l,length:[16],cvcLength:[3],luhn:!0},{type:"visa",pattern:/^4/,format:l,length:[13,16,19],cvcLength:[3],luhn:!0}];var g=function(){function t(){}return t.restrictNumeric=function(t){return v(t,"keypress",w)},t.formatCardCVC=function(e){return t.restrictNumeric(e),v(e,"keypress",N),e},t.formatCardExpiry=function(e){var r,n;return t.restrictNumeric(e),e.length&&2===e.length?(r=e[0],n=e[1],this.formatCardExpiryMultiple(r,n)):(v(e,"keypress",b),v(e,"keypress",E),v(e,"keypress",x),v(e,"keypress",M),v(e,"keydown",D)),e},t.formatCardExpiryMultiple=function(t,e){return v(t,"keypress",$),v(t,"keypress",k),v(e,"keypress",P)},t.formatCardNumber=function(e,r){return t.restrictNumeric(e),v(e,"keypress",function(t){return function(e){var r,n=e.target,a=String.fromCharCode(e.which);if(/^\d+$/.test(a)&&!h(n)){var i=(n.value+a).replace(/\D/g,""),o=f(i);return r=16,o&&(r=o.length[o.length.length-1]),t&&(r=Math.min(r,t)),i.length<=r?void 0:e.preventDefault()}}}(r)),v(e,"keypress",function(t){return function(e){var r,n,a,i,o,s,u,c,l,p;if(n=String.fromCharCode(e.which),/^\d+$/.test(n)){for(r=f((c=(o=e.target).value)+n),i=(c.replace(/\D/g,"")+n).length,u=[16],r&&(u=r.length),t&&(u=u.filter((function(e){return e<=t}))),a=l=0,p=u.length;l<p;a=++l)if(!(i>=(s=u[a])&&u[a+1])&&i>=s)return;if(!h(o))return(r&&"amex"===r.type?/^(\d{4}|\d{4}\s\d{6})$/:/(?:^|\s)(\d{4})$/).test(c)?(e.preventDefault(),o.value=c+" "+n,m(o,"change")):void 0}}}(r)),v(e,"keydown",C),v(e,"keyup blur",I),v(e,"paste",y),v(e,"input",y),e},t}();function y(t){return setTimeout((function(){var e,r=t.target;if(r)return e=r.value,(e=g.fns.formatCardNumber(e))&&(r.value=e),m(r,"change")}))}function C(t){var e=t.target,r=e.value;if(!t.meta&&8===t.which&&!h(e))return/\d\s$/.test(r)?(t.preventDefault(),e.value=r.replace(/\d\s$/,""),m(e,"change")):/\s\d?$/.test(r)?(t.preventDefault(),e.value=r.replace(/\s\d?$/,""),m(e,"change")):void 0}function E(t){var e=String.fromCharCode(t.which);if(/^\d+$/.test(e)){var r=t.target,n=r.value+e;return/^\d$/.test(n)&&"0"!==n&&"1"!==n?(t.preventDefault(),r.value="0"+n+" / ",m(r,"change")):/^\d\d$/.test(n)?(t.preventDefault(),r.value=n+" / ",m(r,"change")):void 0}}function k(t){var e=String.fromCharCode(t.which);if(/^\d+$/.test(e)){var r=t.target,n=r.value+e;return/^\d$/.test(n)&&"0"!==n&&"1"!==n?(t.preventDefault(),r.value="0"+n,m(r,"change")):/^\d\d$/.test(n)?(t.preventDefault(),r.value=n,m(r,"change")):void 0}}function M(t){var e=String.fromCharCode(t.which);if(/^\d+$/.test(e)){var r=t.target,n=r.value;return/^\d\d$/.test(n)?(r.value=n+" / ",m(r,"change")):void 0}}function x(t){if("/"===String.fromCharCode(t.which)){var e=t.target,r=e.value;return/^\d$/.test(r)&&"0"!==r?(e.value="0"+r+" / ",m(e,"change")):void 0}}function D(t){if(!t.metaKey){var e=t.target,r=e.value;if(8===t.which&&!h(e))return/\d(\s|\/)+$/.test(r)?(t.preventDefault(),e.value=r.replace(/\d(\s|\/)*$/,""),m(e,"change")):/\s\/\s?\d?$/.test(r)?(t.preventDefault(),e.value=r.replace(/\s\/\s?\d?$/,""),m(e,"change")):void 0}}function w(t){var e;return!(!t.metaKey&&!t.ctrlKey)||(32===t.which?(t.preventDefault(),!1):0===t.which||(t.which<33||(e=String.fromCharCode(t.which),/[\d\s]/.test(e)?void 0:(t.preventDefault(),!1))))}function L(t,e){var r=t.target,n=String.fromCharCode(t.which);if(/^\d+$/.test(n)&&!h(r))return(r.value+n).replace(/\D/g,"").length>e?t.preventDefault():void 0}function b(t){return L(t,6)}function $(t){return L(t,2)}function P(t){return L(t,4)}function N(t){var e=t.target,r=String.fromCharCode(t.which);if(/^\d+$/.test(r)&&!h(e))return(e.value+r).length<=4?void 0:t.preventDefault()}function I(t){var e=t.target,r=e.value,n=g.fns.cardType(r)||"unknown";if(e&&e.classList&&!e.classList.contains(n))return e.classList.add("unknown"),c.forEach((function(t){return e.classList.remove(t.type)})),e.classList.add(n),"unknown"!==n?e.classList.contains("identified")&&e.classList.add("identified"):e.classList.remove("identified"),m(e,"payment.cardType",n)}g.fns={cardExpiryVal:function(t){var e,r,n;return e=(n=(t=t.replace(/\s/g,"")).split("/",2))[0],2===(null!=(r=n[1])?r.length:void 0)&&/^\d+$/.test(r)&&(r=(new Date).getFullYear().toString().slice(0,2)+r),{month:e,year:r}},validateCardNumber:function(t){var e,r;return t=(t+"").replace(/\s+|-/g,""),!!/^\d+$/.test(t)&&(!!(e=f(t))&&(r=t.length,p.call(e.length,r)>=0&&(!1===e.luhn||function(t){var e=!0,r=0;return(t+"").split("").reverse().forEach((function(t){var n=parseInt(t,10);return(e=!e)&&(n*=2),n>9&&(n-=9),r+=n})),r%10==0}(t))))},validateCardExpiry:function(t,e){var r,n,a;if("string"==typeof t&&p.call(t,"/")>=0&&(t=(a=g.fns.cardExpiryVal(t)).month,e=a.year),!t||!e)return!1;if(t=t.trim(),e=e.trim(),!/^\d+$/.test(t))return!1;if(!/^\d+$/.test(e))return!1;var i=parseInt(t,10);return!!(i&&i<=12)&&(2===e.length&&(e=(new Date).getFullYear().toString().slice(0,2)+e),n=new Date(parseInt(e,10),i),r=new Date,n.setMonth(n.getMonth()-1),n.setMonth(n.getMonth()+1,1),n>r)},validateCardCVC:function(t,e){var r,n;return t=t.trim(),!!/^\d+$/.test(t)&&(e&&d(e)?(n=d(e),r=t.length,p.call(null!=n?n.cvcLength:void 0,r)>=0):t.length>=3&&t.length<=4)},cardType:function(t){if(!t)return null;var e=f(t);return(null!=e?e.type:void 0)||null},formatCardNumber:function(t){var e,r,n;if(!(e=f(t)))return t;if(n=e.length[e.length.length-1],t=(t=t.replace(/\D/g,"")).slice(0,n),e.format.global){var a=t.match(e.format);return null!=a?a.join(" "):void 0}return null!=(r=e.format.exec(t))?(r.shift(),(r=r.filter((function(t){return t}))).join(" ")):void 0}};var T=function(t){this.el=t;var e=this.el.nativeElement;g.formatCardCVC(e),g.restrictNumeric(e)};T.decorators=[{type:e.Directive,args:[{selector:"[cntMaskCCCvc]"}]}],T.ctorParameters=function(){return[{type:e.ElementRef}]};var S=function(){};S.decorators=[{type:e.Directive,args:[{selector:"[cntMaskCCCvc]"}]}];var O=function(t){this.el=t;var e=this.el.nativeElement;g.formatCardExpiry(e),g.restrictNumeric(e)};O.decorators=[{type:e.Directive,args:[{selector:"[cntMaskCCExp]"}]}],O.ctorParameters=function(){return[{type:e.ElementRef}]};var R=function(){};R.decorators=[{type:e.Directive,args:[{selector:"[cntMaskCCExp]"}]}];var j=function(){function t(t,e){this.renderer=t,this.el=e;var r=this.el.nativeElement;this.cardType="",g.formatCardNumber(r),g.restrictNumeric(r)}return t.prototype.onKeypress=function(t){var e=this.el.nativeElement,r=e.value;this.cardType=g.fns.cardType(r),this.cardType&&""!==this.cardType?this.renderer.removeClass(e,this.cardType):this.cardType=""},t}();j.decorators=[{type:e.Directive,args:[{selector:"[cntMaskCCNum]"}]}],j.ctorParameters=function(){return[{type:e.Renderer2},{type:e.ElementRef}]},j.propDecorators={onKeypress:[{type:e.HostListener,args:["keypress",["$event"]]}]};var A=function(){};A.decorators=[{type:e.Directive,args:[{selector:"[cntMaskCCNum]"}]}];var F=function(){function t(){}return t.validateCardNumber=function(t){if(t&&!g.fns.validateCardNumber(t.value))return{cardNumber:!0};return null},t.validateCardExpiry=function(t){if(t){var e=t.value.split("/"),r=!1;if(e.length>1){var n=e[0].replace(/^\s+|\s+$/g,""),a=e[1].replace(/^\s+|\s+$/g,"");r=g.fns.validateCardExpiry(n,a)}if(!r)return{cardExpiry:!0}}return null},t.validateCardCvc=function(t){if(t&&!g.fns.validateCardCVC(t.value))return{cardCvc:!0};return null},t}(),V=function(t){return void 0===t&&(t=13),function(t){return["(",/[1-9]/,/\d/,/\d/,")"," ",/\d/,/\d/,/\d/,"-",/\d/,/\d/,/\d/,/\d/]}},_=function(){},B=function(){function t(t,e,r,n){this.renderer=t,this.elementRef=e,this.platformId=r,this.compositionMode=n,this.clean=!0,this.maxNumberLength=13,this.composing=!1,this.onChange=function(t){},this.onTouched=function(){},null==this.compositionMode&&(this.compositionMode=!this.isAndroid())}return t.prototype.ngOnInit=function(){this.setupMask(!0),void 0!==this.textMaskInputElement&&this.textMaskInputElement.update(this.inputElement.value)},t.prototype.ngOnChanges=function(t){this.setupMask(!0),void 0!==this.textMaskInputElement&&this.textMaskInputElement.update(this.inputElement.value)},t.prototype.onBlur=function(){this.onTouched()},t.prototype.writeValue=function(t){this.setupMask();var e=null==t?"":t;this.renderer.setProperty(this.inputElement,"value",e),void 0!==this.textMaskInputElement&&this.textMaskInputElement.update(t)},t.prototype.registerOnChange=function(t){this.onChange=t},t.prototype.registerOnTouched=function(t){this.onTouched=t},t.prototype.setDisabledState=function(t){this.renderer.setProperty(this.elementRef.nativeElement,"disabled",t)},t.prototype.handleInput=function(t){(!this.compositionMode||this.compositionMode&&!this.composing)&&(this.setupMask(),void 0!==this.textMaskInputElement&&(this.textMaskInputElement.update(t),t=this.inputElement.value,this.clean?this.onChange(t.toString().replace(/[^\d\^\+]/gm,"")):this.onChange(t)))},t.prototype.setupMask=function(t){void 0===t&&(t=!1),this.textMaskConfig={mask:V(this.maxNumberLength),guide:!1,placeholderChar:"_",pipe:void 0,keepCharPositions:!1},this.inputElement||("INPUT"===this.elementRef.nativeElement.tagName.toUpperCase()?this.inputElement=this.elementRef.nativeElement:this.inputElement=this.elementRef.nativeElement.getElementsByTagName("INPUT")[0]),this.inputElement&&t&&(this.textMaskInputElement=i.createTextMaskInputElement(Object.assign({inputElement:this.inputElement},this.textMaskConfig)))},t.prototype.compositionStart=function(){this.composing=!0},t.prototype.compositionEnd=function(t){this.composing=!1,this.compositionMode&&this.handleInput(t)},t.prototype.isAndroid=function(){if(n.isPlatformBrowser(this.platformId)&&window&&window.navigator){var t=window.navigator.userAgent;return/android (\d+)/.test(t.toLowerCase())}return!1},t}();B.decorators=[{type:e.Directive,args:[{exportAs:"cntMaskPhone",providers:[{multi:!0,provide:a.NG_VALUE_ACCESSOR,useExisting:e.forwardRef((function(){return B}))}],selector:"[cntMaskPhone]"}]}],B.ctorParameters=function(){return[{type:e.Renderer2},{type:e.ElementRef},{type:Object,decorators:[{type:e.Inject,args:[e.PLATFORM_ID]}]},{type:Boolean,decorators:[{type:e.Optional},{type:e.Inject,args:[a.COMPOSITION_BUFFER_MODE]}]}]},B.propDecorators={clean:[{type:e.Input}],maxNumberLength:[{type:e.Input}],onBlur:[{type:e.HostListener,args:["blur"]}],handleInput:[{type:e.HostListener,args:["input",["$event.target.value"]]}],compositionStart:[{type:e.HostListener,args:["compositionstart"]}],compositionEnd:[{type:e.HostListener,args:["compositionend",["$event.target.value"]]}]};var U=function(){function t(){}return t.prototype.transform=function(t){return t?r.conformToMask(t,V(),{guide:!1}).conformedValue:""},t}();U.decorators=[{type:e.Pipe,args:[{name:"cntMaskPhone"}]}];var q=function(){};q.decorators=[{type:e.NgModule,args:[{imports:[r.TextMaskModule],declarations:[j,O,T,o,B,U],exports:[j,O,T,o,B,U],providers:[o,U]}]}];var H=function(){};H.decorators=[{type:e.Directive,args:[{exportAs:"cntMaskPhone",providers:[{multi:!0,provide:a.NG_VALUE_ACCESSOR,useExisting:e.forwardRef((function(){return H}))}],selector:"[cntMaskPhone]"}]}];var K=function(){function t(){}return t.prototype.transform=function(t){return t},t}();K.decorators=[{type:e.Pipe,args:[{name:"cntMaskPhone"}]}],t.CCCvcFormatDirective=T,t.CCCvcFormatDirectiveMock=S,t.CCExpiryFormatDirective=O,t.CCExpiryFormatDirectiveMock=R,t.CCNumberFormatDirective=j,t.CCNumberFormatDirectiveMock=A,t.CardExpirationPipe=o,t.CardExpirationPipeMock=s,t.CntMasksModule=q,t.CreditCardValidator=F,t.PhoneMaskDirective=B,t.PhoneMaskDirectiveMock=H,t.PhoneMaskPipe=U,t.PhoneMaskPipeMock=K,t.TextMaskConfig=_,Object.defineProperty(t,"__esModule",{value:!0})}));
//# sourceMappingURL=cnt-masks.umd.min.js.map