{"version":3,"sources":["../../../projects/cnt-masks/src/lib/cc/card-expiration.pipe.ts","../../../projects/cnt-masks/src/lib/cc/card-expiration.pipe.mock.ts","../../../node_modules/tslib/tslib.es6.js","../../../projects/cnt-masks/src/lib/cc/payment.ts","../../../projects/cnt-masks/src/lib/cc/directives/cc-cvc-format.directive.ts","../../../projects/cnt-masks/src/lib/cc/directives/cc-cvc-format.directive.mock.ts","../../../projects/cnt-masks/src/lib/cc/directives/cc-expiry-format.directive.ts","../../../projects/cnt-masks/src/lib/cc/directives/cc-expiry-format.directive.mock.ts","../../../projects/cnt-masks/src/lib/cc/directives/cc-number-format.directive.ts","../../../projects/cnt-masks/src/lib/cc/directives/cc-number-format.directive.mock.ts","../../../projects/cnt-masks/src/lib/cc/validators/credit-card.validator.ts","../../../projects/cnt-masks/src/lib/phone/utils.ts","../../../projects/cnt-masks/src/lib/phone/phone-mask.directive.ts","../../../projects/cnt-masks/src/lib/phone/phone-mask.pipe.ts","../../../projects/cnt-masks/src/lib/cnt-masks.module.ts","../../../projects/cnt-masks/src/lib/phone/phone-mask.directive.mock.ts","../../../projects/cnt-masks/src/lib/phone/phone-mask.pipe.mock.ts"],"names":["CardExpirationPipe","prototype","transform","value","length","substring","Pipe","args","name","CardExpirationPipeMock","Object","create","__values","o","s","Symbol","iterator","m","i","call","next","done","TypeError","cards","defaultFormat","indexOf","item","l","this","cardFromNumber","num","card","len","numString","replace","pattern","test","cardFromType","type","hasTextSelected","target","selectionStart","selectionEnd","error","qjon","element","eventName","callback","_c","Array","from","_d","match","addEventListener","attachEvent","_e","split","_f","trigger","el","data","ev","CustomEvent","detail","e","document","createEvent","initCustomEvent","initEvent","dispatchEvent","format","cvcLength","luhn","Payment","restrictNumeric","formatCardCVC","restrictCVC","formatCardExpiry","month","year","formatCardExpiryMultiple","restrictCombinedExpiry","formatExpiry","formatForwardSlash","formatForwardExpiry","formatBackExpiry","restrictMonthExpiry","formatMonthExpiry","restrictYearExpiry","formatCardNumber","maxLength","digit","String","fromCharCode","which","Math","min","preventDefault","restrictCardNumber","upperLength","upperLengths","j","filter","x","formatBackCardNumber","setCardType","reFormatCardNumber","setTimeout","fns","meta","val","metaKey","input","ctrlKey","restrictExpiry","cardType","classList","contains","add","forEach","remove","cardExpiryVal","ref","Date","getFullYear","toString","slice","validateCardNumber","odd","sum","reverse","digitString","parseInt","luhnCheck","validateCardExpiry","currentTime","expiry","ref1","trim","monthInt","setMonth","getMonth","validateCardCVC","cvc","groups","global","join","exec","shift","n","nativeElement","Directive","selector","ElementRef","CCNumberFormatDirective","renderer","onKeypress","elementValue","removeClass","Renderer2","HostListener","CreditCardValidator","control","cardNumber","controlValue","isValid","cardExpiry","validateCardCvc","cardCvc","mask","rawValue","PhoneMaskDirective","elementRef","platformId","compositionMode","clean","maxNumberLength","composing","onChange","_","onTouched","isAndroid","ngOnInit","setupMask","undefined","textMaskInputElement","update","inputElement","ngOnChanges","changes","onBlur","writeValue","normalizedValue","setProperty","registerOnChange","fn","registerOnTouched","setDisabledState","isDisabled","handleInput","textMaskConfig","guide","placeholderChar","pipe","keepCharPositions","tagName","toUpperCase","getElementsByTagName","createTextMaskInputElement","assign","compositionStart","compositionEnd","isPlatformBrowser","window","navigator","userAgent","toLowerCase","exportAs","providers","multi","provide","NG_VALUE_ACCESSOR","useExisting","forwardRef","Inject","PLATFORM_ID","Optional","COMPOSITION_BUFFER_MODE","Input","PhoneMaskPipe","conformToMask","conformedValue","NgModule","imports","TextMaskModule","declarations","CCExpiryFormatDirective","CCCvcFormatDirective","exports","PhoneMaskDirectiveMock","PhoneMaskPipeMock"],"mappings":"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","sourcesContent":["import { Pipe, PipeTransform } from '@angular/core';\n\n@Pipe({\n  name: 'cardExpiration',\n})\nexport class CardExpirationPipe implements PipeTransform {\n  transform(value: string): string {\n    if (typeof value !== 'number') {\n      value = value + '';\n    }\n\n    if (typeof value !== 'string') {\n      return value;\n    }\n\n    if (value.length === 3) {\n      value = `0${value}`;\n    }\n\n    return `${value.substring(0, 2)}/${value.substring(2)}`;\n  }\n}\n","import { Pipe, PipeTransform } from '@angular/core';\n\n@Pipe({\n  name: 'cardExpiration',\n})\nexport class CardExpirationPipeMock implements PipeTransform {\n  transform(value: string): string {\n    return value;\n  }\n}\n","/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport var __createBinding = Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n});\r\n\r\nexport function __exportStar(m, o) {\r\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(o, p)) __createBinding(o, m, p);\r\n}\r\n\r\nexport function __values(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n};\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nvar __setModuleDefault = Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n\r\nexport function __classPrivateFieldGet(receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n}\r\n\r\nexport function __classPrivateFieldSet(receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n}\r\n","/**\n * Based on:\n * Copyright (c) 2014 Jesse Pollak\n *\n * Permission is hereby granted, free of charge, to any person obtaining\n * a copy of this software and associated documentation files (the\n * \"Software\"), to deal in the Software without restriction, including\n * without limitation the rights to use, copy, modify, merge, publish,\n * distribute, sublicense, and/or sell copies of the Software, and to\n * permit persons to whom the Software is furnished to do so, subject to\n * the following conditions:\n *\n * The above copyright notice and this permission notice shall be\n * included in all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\n * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND\n * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE\n * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION\n * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION\n * WITH TH\n */\ninterface ICardObject {\n  type: string;\n  pattern: RegExp;\n  format: RegExp;\n  length: number[];\n  cvcLength: number[];\n  luhn: boolean;\n}\n\nlet cards: ICardObject[];\nlet defaultFormat;\n\nconst indexOf =\n  [].indexOf ||\n  function (this: any[], item: any): number {\n    for (let i = 0, l = this.length; i < l; i++) {\n      if (i in this && this[i] === item) {\n        return i;\n      }\n    }\n    return -1;\n  };\n\ndefaultFormat = /(\\d{1,4})/g;\n\ncards = [\n  {\n    type: 'amex',\n    pattern: /^3[47]/,\n    format: /(\\d{1,4})(\\d{1,6})?(\\d{1,5})?/,\n    length: [15],\n    cvcLength: [4],\n    luhn: true,\n  },\n  {\n    type: 'dankort',\n    pattern: /^5019/,\n    format: defaultFormat,\n    length: [16],\n    cvcLength: [3],\n    luhn: true,\n  },\n  {\n    type: 'hipercard',\n    pattern: /^(384100|384140|384160|606282|637095|637568|60(?!11))/,\n    format: defaultFormat,\n    length: [14, 15, 16, 17, 18, 19],\n    cvcLength: [3],\n    luhn: true,\n  },\n  {\n    type: 'dinersclub',\n    pattern: /^(36|38|30[0-5])/,\n    format: /(\\d{1,4})(\\d{1,6})?(\\d{1,4})?/,\n    length: [14],\n    cvcLength: [3],\n    luhn: true,\n  },\n  {\n    type: 'discover',\n    pattern: /^(6011|65|64[4-9]|622)/,\n    format: defaultFormat,\n    length: [16],\n    cvcLength: [3],\n    luhn: true,\n  },\n  {\n    type: 'jcb',\n    pattern: /^35/,\n    format: defaultFormat,\n    length: [16],\n    cvcLength: [3],\n    luhn: true,\n  },\n  {\n    type: 'laser',\n    pattern: /^(6706|6771|6709)/,\n    format: defaultFormat,\n    length: [16, 17, 18, 19],\n    cvcLength: [3],\n    luhn: true,\n  },\n  {\n    type: 'maestro',\n    pattern: /^(5018|5020|5038|6304|6703|6708|6759|676[1-3])/,\n    format: defaultFormat,\n    length: [12, 13, 14, 15, 16, 17, 18, 19],\n    cvcLength: [3],\n    luhn: true,\n  },\n  {\n    type: 'mastercard',\n    pattern: /^(5[1-5]|677189)|^(222[1-9]|2[3-6]\\d{2}|27[0-1]\\d|2720)/,\n    format: defaultFormat,\n    length: [16],\n    cvcLength: [3],\n    luhn: true,\n  },\n  {\n    type: 'unionpay',\n    pattern: /^62/,\n    format: defaultFormat,\n    length: [16, 17, 18, 19],\n    cvcLength: [3],\n    luhn: false,\n  },\n  {\n    type: 'visaelectron',\n    pattern: /^4(026|17500|405|508|844|91[37])/,\n    format: defaultFormat,\n    length: [16],\n    cvcLength: [3],\n    luhn: true,\n  },\n  {\n    type: 'elo',\n    // tslint:disable-next-line:max-line-length\n    pattern: /^(4011(78|79)|43(1274|8935)|45(1416|7393|763(1|2))|50(4175|6699|67[0-7][0-9]|9000)|627780|63(6297|6368)|650(03([^4])|04([0-9])|05(0|1)|4(0[5-9]|3[0-9]|8[5-9]|9[0-9])|5([0-2][0-9]|3[0-8])|9([2-6][0-9]|7[0-8])|541|700|720|901)|651652|655000|655021)/,\n    format: defaultFormat,\n    length: [16],\n    cvcLength: [3],\n    luhn: true,\n  },\n  {\n    type: 'visa',\n    pattern: /^4/,\n    format: defaultFormat,\n    length: [13, 16, 19],\n    cvcLength: [3],\n    luhn: true,\n  },\n];\n\nfunction cardFromNumber(num: string): any {\n  let card;\n  let i;\n  let len;\n  const numString = (num + '').replace(/\\D/g, '');\n  for (i = 0, len = cards.length; i < len; i++) {\n    card = cards[i];\n    if (card.pattern.test(numString)) {\n      return card;\n    }\n  }\n\n  return;\n}\n\nfunction cardFromType(type: string): any {\n  let card;\n  let i;\n  let len;\n  for (i = 0, len = cards.length; i < len; i++) {\n    card = cards[i];\n    if (card.type === type) {\n      return card;\n    }\n  }\n\n  return;\n}\n\nfunction luhnCheck(num: string): boolean {\n  let digits;\n  let odd = true;\n  let sum = 0;\n\n  digits = (num + '').split('').reverse();\n\n  digits.forEach((digitString) => {\n    let digit = parseInt(digitString, 10);\n    odd = !odd;\n    if (odd) {\n      digit *= 2;\n    }\n    if (digit > 9) {\n      digit -= 9;\n    }\n    return (sum += digit);\n  });\n\n  return sum % 10 === 0;\n}\n\nfunction hasTextSelected(target?: EventTarget): boolean {\n  let e;\n  try {\n    // If some text is selected\n    if (\n      target &&\n      (target as any).selectionStart != null &&\n      (target as any).selectionStart !== (target as any).selectionEnd\n    ) {\n      return true;\n    }\n  } catch (error) {\n    e = error;\n  }\n\n  return false;\n}\n\nfunction qjon(\n  element: Element | any,\n  eventName: string,\n  callback: (e: Event) => void\n): any {\n  if (element.length) {\n    // handle multiple elements\n    for (const el of Array.from(element)) {\n      qjon(el, eventName, callback);\n    }\n    return;\n  }\n\n  if (eventName.match(' ')) {\n    // handle multiple event attachment\n    for (const multiEventName of Array.from(eventName.split(' '))) {\n      qjon(element, multiEventName, callback);\n    }\n    return;\n  }\n\n  if (element.addEventListener) {\n    return element.addEventListener(eventName, callback, false);\n  }\n\n  if (element.attachEvent) {\n    eventName = 'on' + eventName;\n    return element.attachEvent(eventName, callback);\n  }\n\n  element['on' + eventName] = callback;\n}\n\nfunction trigger(el: Element, name: string, data?: any): boolean {\n  let ev;\n\n  try {\n    ev = new CustomEvent(name, { detail: data });\n  } catch (e) {\n    ev = document.createEvent('CustomEvent');\n    // jsdom doesn't have initCustomEvent, so we need this check for\n    // testing\n    if (ev.initCustomEvent) {\n      ev.initCustomEvent(name, true, true, data);\n    } else {\n      (ev as any).initEvent(name, true, true, data);\n    }\n  }\n\n  return el.dispatchEvent(ev);\n}\n\n// Public\n// @dynamic\nexport class Payment {\n  public static fns = {\n    cardExpiryVal: (value: string) => {\n      let month;\n      let prefix;\n      let year;\n      let ref;\n\n      value = value.replace(/\\s/g, '');\n      (ref = value.split('/', 2)), (month = ref[0]), (year = ref[1]);\n\n      // Allow for year shortcut\n      if ((year != null ? year.length : void 0) === 2 && /^\\d+$/.test(year)) {\n        prefix = new Date().getFullYear();\n        prefix = prefix.toString().slice(0, 2);\n        year = prefix + year;\n      }\n\n      return {\n        month,\n        year,\n      };\n    },\n    validateCardNumber: (num: string) => {\n      let card;\n      let ref;\n\n      num = (num + '').replace(/\\s+|-/g, '');\n      if (!/^\\d+$/.test(num)) {\n        return false;\n      }\n\n      card = cardFromNumber(num);\n      if (!card) {\n        return false;\n      }\n\n      return (\n        ((ref = num.length), indexOf.call(card.length, ref) >= 0) &&\n        (card.luhn === false || luhnCheck(num))\n      );\n    },\n    validateCardExpiry: (month: string, year: string) => {\n      // Allow passing an object\n      let currentTime;\n      let expiry;\n      let prefix;\n      let ref1;\n\n      if (typeof month === 'string' && indexOf.call(month, '/') >= 0) {\n        (ref1 = Payment.fns.cardExpiryVal(month)),\n          (month = ref1.month),\n          (year = ref1.year);\n      }\n\n      if (!(month && year)) {\n        return false;\n      }\n\n      month = month.trim();\n      year = year.trim();\n\n      if (!/^\\d+$/.test(month)) {\n        return false;\n      }\n      if (!/^\\d+$/.test(year)) {\n        return false;\n      }\n\n      const monthInt = parseInt(month, 10);\n\n      if (!(monthInt && monthInt <= 12)) {\n        return false;\n      }\n\n      if (year.length === 2) {\n        prefix = new Date().getFullYear();\n        prefix = prefix.toString().slice(0, 2);\n        year = prefix + year;\n      }\n\n      expiry = new Date(parseInt(year, 10), monthInt);\n      currentTime = new Date();\n\n      // Months start from 0 in JavaScript\n      expiry.setMonth(expiry.getMonth() - 1);\n\n      // The cc expires at the end of the month,\n      // so we need to make the expiry the first day\n      // of the month after\n      expiry.setMonth(expiry.getMonth() + 1, 1);\n\n      return expiry > currentTime;\n    },\n    validateCardCVC: (cvc: string, type?: string) => {\n      let ref;\n      let ref1;\n\n      cvc = cvc.trim();\n      if (!/^\\d+$/.test(cvc)) {\n        return false;\n      }\n\n      if (type && cardFromType(type)) {\n        // Check against a explicit card type\n        ref1 = cardFromType(type);\n        return (\n          (ref = cvc.length),\n          indexOf.call(ref1 != null ? ref1.cvcLength : void 0, ref) >= 0\n        );\n      } else {\n        // Check against all types\n        return cvc.length >= 3 && cvc.length <= 4;\n      }\n    },\n    cardType: (num: string) => {\n      if (!num) {\n        return null;\n      }\n      const ref = cardFromNumber(num);\n      return (ref != null ? ref.type : void 0) || null;\n    },\n    formatCardNumber: (num: string) => {\n      let card;\n      let groups;\n      let upperLength;\n\n      card = cardFromNumber(num);\n      if (!card) {\n        return num;\n      }\n\n      upperLength = card.length[card.length.length - 1];\n\n      num = num.replace(/\\D/g, '');\n      num = num.slice(0, upperLength);\n\n      if (card.format.global) {\n        const ref = num.match(card.format);\n        return ref != null ? ref.join(' ') : void 0;\n      } else {\n        groups = card.format.exec(num);\n        if (groups == null) {\n          return;\n        }\n        groups.shift();\n        groups = groups.filter((n) => n); // Filter empty groups\n        return groups.join(' ');\n      }\n    },\n  };\n\n  public static restrictNumeric(el: Element): any {\n    return qjon(el, 'keypress', restrictNumeric);\n  }\n\n  public static formatCardCVC(el: Element): Element {\n    Payment.restrictNumeric(el);\n    qjon(el, 'keypress', restrictCVC);\n    return el;\n  }\n\n  public static formatCardExpiry(el: Element): Element {\n    let month;\n    let year;\n\n    Payment.restrictNumeric(el);\n    if ((el as any).length && (el as any).length === 2) {\n      (month = (el as any)[0]), (year = (el as any)[1]);\n      this.formatCardExpiryMultiple(month, year);\n    } else {\n      qjon(el, 'keypress', restrictCombinedExpiry);\n      qjon(el, 'keypress', formatExpiry);\n      qjon(el, 'keypress', formatForwardSlash);\n      qjon(el, 'keypress', formatForwardExpiry);\n      qjon(el, 'keydown', formatBackExpiry);\n    }\n    return el;\n  }\n\n  public static formatCardExpiryMultiple(month: string, year: string): any {\n    qjon(month, 'keypress', restrictMonthExpiry);\n    qjon(month, 'keypress', formatMonthExpiry);\n    return qjon(year, 'keypress', restrictYearExpiry);\n  }\n\n  public static formatCardNumber(el: Element, maxLength?: number): Element {\n    Payment.restrictNumeric(el);\n    qjon(el, 'keypress', restrictCardNumber(maxLength));\n    qjon(el, 'keypress', formatCardNumber(maxLength));\n    qjon(el, 'keydown', formatBackCardNumber);\n    qjon(el, 'keyup blur', setCardType);\n    qjon(el, 'paste', reFormatCardNumber);\n    qjon(el, 'input', reFormatCardNumber);\n    return el;\n  }\n}\n// Private\n\n// Format Card Number\n\nfunction reFormatCardNumber(e: Event): number {\n  return setTimeout(() => {\n    let value;\n    const target = e.target as HTMLDataElement;\n\n    if (!target) {\n      return;\n    }\n\n    value = target.value;\n    value = Payment.fns.formatCardNumber(value);\n    if (value) {\n      target.value = value;\n    }\n    return trigger(target, 'change');\n  });\n}\n\nfunction formatCardNumber(maxLength?: number): (event) => boolean {\n  return (e: Event) => {\n    // Only format if input is a number\n    let card;\n    let digit;\n    let i;\n    let length;\n    let re;\n    let target;\n    let upperLength;\n    let upperLengths;\n    let value;\n    let j;\n    let len;\n    digit = String.fromCharCode((e as any).which);\n    if (!/^\\d+$/.test(digit)) {\n      return;\n    }\n\n    target = e.target as HTMLDataElement;\n    value = target.value;\n    card = cardFromNumber(value + digit);\n    length = (value.replace(/\\D/g, '') + digit).length;\n\n    upperLengths = [16];\n    if (card) {\n      upperLengths = card.length;\n    }\n    if (maxLength) {\n      upperLengths = upperLengths.filter((x) => x <= maxLength);\n    }\n\n    // Return if an upper length has been reached\n    for (i = j = 0, len = upperLengths.length; j < len; i = ++j) {\n      upperLength = upperLengths[i];\n      if (length >= upperLength && upperLengths[i + 1]) {\n        continue;\n      }\n      if (length >= upperLength) {\n        return;\n      }\n    }\n\n    // Return if focus isn't at the end of the text\n    if (hasTextSelected(target)) {\n      return;\n    }\n\n    if (card && card.type === 'amex') {\n      // Amex cards are formatted differently\n      re = /^(\\d{4}|\\d{4}\\s\\d{6})$/;\n    } else {\n      re = /(?:^|\\s)(\\d{4})$/;\n    }\n\n    // If '4242' + 4\n    if (re.test(value)) {\n      e.preventDefault();\n      target.value = value + ' ' + digit;\n      return trigger(target, 'change');\n    }\n\n    return;\n  };\n}\n\nfunction formatBackCardNumber(e: Event): boolean {\n  const target = e.target as HTMLDataElement;\n  const value = target.value;\n\n  if ((e as any).meta) {\n    return;\n  }\n\n  // Return unless backspacing\n  if ((e as any).which !== 8) {\n    return;\n  }\n\n  // Return if focus isn't at the end of the text\n  if (hasTextSelected(target)) {\n    return;\n  }\n\n  // Remove the trailing space\n  if (/\\d\\s$/.test(value)) {\n    e.preventDefault();\n    target.value = value.replace(/\\d\\s$/, '');\n    return trigger(target, 'change');\n  } else if (/\\s\\d?$/.test(value)) {\n    e.preventDefault();\n    target.value = value.replace(/\\s\\d?$/, '');\n    return trigger(target, 'change');\n  }\n\n  return;\n}\n\n// Format Expiry\n\nfunction formatExpiry(e: Event): boolean {\n  // Only format if input is a number\n  const digit = String.fromCharCode((e as any).which);\n  if (!/^\\d+$/.test(digit)) {\n    return;\n  }\n\n  const target = e.target as HTMLDataElement;\n  const val = target.value + digit;\n\n  if (/^\\d$/.test(val) && val !== '0' && val !== '1') {\n    e.preventDefault();\n    target.value = '0' + val + ' / ';\n    return trigger(target, 'change');\n  } else if (/^\\d\\d$/.test(val)) {\n    e.preventDefault();\n    target.value = val + ' / ';\n    return trigger(target, 'change');\n  }\n\n  return;\n}\n\nfunction formatMonthExpiry(e: Event): boolean {\n  const digit = String.fromCharCode((e as any).which);\n  if (!/^\\d+$/.test(digit)) {\n    return;\n  }\n\n  const target = e.target as HTMLDataElement;\n  const val = target.value + digit;\n\n  if (/^\\d$/.test(val) && val !== '0' && val !== '1') {\n    e.preventDefault();\n    target.value = '0' + val;\n    return trigger(target, 'change');\n  } else if (/^\\d\\d$/.test(val)) {\n    e.preventDefault();\n    target.value = val;\n    return trigger(target, 'change');\n  }\n\n  return;\n}\n\nfunction formatForwardExpiry(e: Event): boolean {\n  const digit = String.fromCharCode((e as any).which);\n  if (!/^\\d+$/.test(digit)) {\n    return;\n  }\n\n  const target = e.target as HTMLDataElement;\n  const val = target.value;\n\n  if (/^\\d\\d$/.test(val)) {\n    target.value = val + ' / ';\n    return trigger(target, 'change');\n  }\n\n  return;\n}\n\nfunction formatForwardSlash(e: Event): boolean {\n  const slash = String.fromCharCode((e as any).which);\n  if (slash !== '/') {\n    return;\n  }\n\n  const target = e.target as HTMLDataElement;\n  const val = target.value;\n\n  if (/^\\d$/.test(val) && val !== '0') {\n    target.value = '0' + val + ' / ';\n    return trigger(target, 'change');\n  }\n\n  return;\n}\n\nfunction formatBackExpiry(e: Event): boolean {\n  // If shift+backspace is pressed\n  if ((e as any).metaKey) {\n    return;\n  }\n\n  const target = e.target as HTMLDataElement;\n  const value = target.value;\n\n  // Return unless backspacing\n  if ((e as any).which !== 8) {\n    return;\n  }\n\n  // Return if focus isn't at the end of the text\n  if (hasTextSelected(target)) {\n    return;\n  }\n\n  // Remove the trailing space\n  if (/\\d(\\s|\\/)+$/.test(value)) {\n    e.preventDefault();\n    target.value = value.replace(/\\d(\\s|\\/)*$/, '');\n    return trigger(target, 'change');\n  } else if (/\\s\\/\\s?\\d?$/.test(value)) {\n    e.preventDefault();\n    target.value = value.replace(/\\s\\/\\s?\\d?$/, '');\n    return trigger(target, 'change');\n  }\n\n  return;\n}\n\n//  Restrictions\n\nfunction restrictNumeric(e: Event): boolean {\n  // Key event is for a browser shortcut\n  let input;\n  if ((e as any).metaKey || (e as any).ctrlKey) {\n    return true;\n  }\n\n  // If keycode is a space\n  if ((e as any).which === 32) {\n    e.preventDefault();\n    return false;\n  }\n\n  // If keycode is a special char (WebKit)\n  if ((e as any).which === 0) {\n    return true;\n  }\n\n  // If char is a special char (Firefox)\n  if ((e as any).which < 33) {\n    return true;\n  }\n\n  input = String.fromCharCode((e as any).which);\n\n  // Char is a number or a space\n  if (!/[\\d\\s]/.test(input)) {\n    e.preventDefault();\n    return false;\n  }\n}\n\nfunction restrictCardNumber(maxLength?: number): (Event) => void {\n  return (e: Event) => {\n    let length;\n\n    const target = e.target as HTMLDataElement;\n    const digit = String.fromCharCode((e as any).which);\n    if (!/^\\d+$/.test(digit)) {\n      return;\n    }\n\n    if (hasTextSelected(target)) {\n      return;\n    }\n\n    // Restrict number of digits\n    const value = (target.value + digit).replace(/\\D/g, '');\n    const card = cardFromNumber(value);\n\n    length = 16;\n    if (card) {\n      length = card.length[card.length.length - 1];\n    }\n    if (maxLength) {\n      length = Math.min(length, maxLength);\n    }\n\n    if (!(value.length <= length)) {\n      return e.preventDefault();\n    }\n  };\n}\n\nfunction restrictExpiry(e: Event, length: number): void {\n  let value;\n  const target = e.target as HTMLDataElement;\n  const digit = String.fromCharCode((e as any).which);\n  if (!/^\\d+$/.test(digit)) {\n    return;\n  }\n\n  if (hasTextSelected(target)) {\n    return;\n  }\n\n  value = target.value + digit;\n  value = value.replace(/\\D/g, '');\n\n  if (value.length > length) {\n    return e.preventDefault();\n  }\n}\n\nfunction restrictCombinedExpiry(e: Event): void {\n  return restrictExpiry(e, 6);\n}\n\nfunction restrictMonthExpiry(e: Event): void {\n  return restrictExpiry(e, 2);\n}\n\nfunction restrictYearExpiry(e: Event): void {\n  return restrictExpiry(e, 4);\n}\n\nfunction restrictCVC(e: Event): void {\n  const target = e.target as HTMLDataElement;\n  const digit = String.fromCharCode((e as any).which);\n  if (!/^\\d+$/.test(digit)) {\n    return;\n  }\n\n  if (hasTextSelected(target)) {\n    return;\n  }\n\n  const val = target.value + digit;\n  if (!(val.length <= 4)) {\n    return e.preventDefault();\n  }\n}\n\nfunction setCardType(e: Event): boolean {\n  const target = e.target as HTMLDataElement;\n  const val = target.value;\n  const cardType = Payment.fns.cardType(val) || 'unknown';\n\n  if (target && target.classList && !target.classList.contains(cardType)) {\n    target.classList.add('unknown');\n    cards.forEach((card) => target.classList.remove(card.type));\n\n    target.classList.add(cardType);\n\n    if (cardType !== 'unknown') {\n      if (target.classList.contains('identified')) {\n        target.classList.add('identified');\n      }\n    } else {\n      target.classList.remove('identified');\n    }\n    return trigger(target, 'payment.cardType', cardType);\n  }\n\n  return;\n}\n","import { Directive, ElementRef } from '@angular/core';\n\nimport { Payment } from '../payment';\n\n@Directive({\n  selector: '[cntMaskCCCvc]',\n})\nexport class CCCvcFormatDirective {\n  constructor(private el: ElementRef) {\n    const element = this.el.nativeElement;\n\n    // call lib functions\n    Payment.formatCardCVC(element);\n    Payment.restrictNumeric(element);\n  }\n}\n","import { Directive } from '@angular/core';\n\n@Directive({\n  selector: '[cntMaskCCCvc]',\n})\nexport class CCCvcFormatDirectiveMock {}\n","import { Directive, ElementRef } from '@angular/core';\n\nimport { Payment } from '../payment';\n\n@Directive({\n  selector: '[cntMaskCCExp]',\n})\nexport class CCExpiryFormatDirective {\n  constructor(private el: ElementRef) {\n    const element = this.el.nativeElement;\n\n    // call lib functions\n    Payment.formatCardExpiry(element);\n    Payment.restrictNumeric(element);\n  }\n}\n","import { Directive } from '@angular/core';\n\n@Directive({\n  selector: '[cntMaskCCExp]',\n})\nexport class CCExpiryFormatDirectiveMock {}\n","import { Directive, ElementRef, HostListener, Renderer2 } from '@angular/core';\nimport { Payment } from '../payment';\n\n@Directive({\n  selector: '[cntMaskCCNum]',\n})\nexport class CCNumberFormatDirective {\n  cardType: string | null;\n\n  constructor(private renderer: Renderer2, private el: ElementRef) {\n    const element = this.el.nativeElement;\n    this.cardType = '';\n\n    // call lib functions\n    Payment.formatCardNumber(element);\n    Payment.restrictNumeric(element);\n  }\n\n  @HostListener('keypress', ['$event'])\n  onKeypress(e: Event): void {\n    const element = this.el.nativeElement;\n    const elementValue = element.value;\n\n    this.cardType = Payment.fns.cardType(elementValue);\n\n    if (this.cardType && this.cardType !== '') {\n      this.renderer.removeClass(element, this.cardType);\n    } else {\n      this.cardType = '';\n    }\n  }\n}\n","import { Directive } from '@angular/core';\n\n@Directive({\n  selector: '[cntMaskCCNum]',\n})\nexport class CCNumberFormatDirectiveMock {}\n","import { FormControl, ValidationErrors } from '@angular/forms';\nimport { Payment } from '../payment';\n\nexport class CreditCardValidator {\n  /**\n   * Validates a cc number\n   */\n  static validateCardNumber(control: FormControl): ValidationErrors {\n    if (control) {\n      const isValid = Payment.fns.validateCardNumber(control.value);\n\n      if (!isValid) {\n        return {\n          cardNumber: true,\n        };\n      }\n    }\n\n    return null;\n  }\n\n  /**\n   * Validates the expiry date.\n   * Breaks exp by \"/\" string and assumes that first array entry is month and second year\n   * Also removes any spaces\n   */\n  static validateCardExpiry(control: FormControl): ValidationErrors {\n    if (control) {\n      const controlValue = control.value.split('/');\n      let isValid = false;\n\n      if (controlValue.length > 1) {\n        const month = controlValue[0].replace(/^\\s+|\\s+$/g, '');\n        const year = controlValue[1].replace(/^\\s+|\\s+$/g, '');\n\n        isValid = Payment.fns.validateCardExpiry(month, year);\n      }\n\n      if (!isValid) {\n        return {\n          cardExpiry: true,\n        };\n      }\n    }\n\n    return null;\n  }\n\n  /**\n   * Validates cards CVC\n   * Also removes any spaces\n   */\n  static validateCardCvc(control: FormControl): ValidationErrors {\n    if (control) {\n      const isValid = Payment.fns.validateCardCVC(control.value);\n\n      if (!isValid) {\n        return {\n          cardCvc: true,\n        };\n      }\n    }\n\n    return null;\n  }\n}\n","export const clean = (number: string) => {\n  return number.toString().replace(/[^\\d\\^\\+]/gm, '');\n};\n\nexport const mask = (maxLength: number = 13) => (rawValue: string) => {\n  // if (clean(rawValue).length <= 12 || maxLength === 12) {\n  // \treturn ['+', /[1-9]/, ' ', '(', /[1-9]/, /\\d/, /\\d/, ')', ' ', /\\d/, /\\d/, /\\d/, '-', /\\d/, /\\d/, '-', /\\d/, /\\d/];\n  // }\n\n  return [\n    '(',\n    /[1-9]/,\n    /\\d/,\n    /\\d/,\n    ')',\n    ' ',\n    /\\d/,\n    /\\d/,\n    /\\d/,\n    '-',\n    /\\d/,\n    /\\d/,\n    /\\d/,\n    /\\d/,\n  ];\n};\n","import { isPlatformBrowser } from '@angular/common';\nimport {\n  Directive,\n  ElementRef,\n  forwardRef,\n  HostListener,\n  Inject,\n  Input,\n  OnChanges,\n  OnInit,\n  Optional,\n  PLATFORM_ID,\n  Renderer2,\n  SimpleChanges,\n} from '@angular/core';\nimport {\n  COMPOSITION_BUFFER_MODE,\n  ControlValueAccessor,\n  NG_VALUE_ACCESSOR,\n} from '@angular/forms';\nimport { createTextMaskInputElement } from 'text-mask-core/dist/textMaskCore';\nimport { clean, mask } from './utils';\n\nexport class TextMaskConfig {\n  public mask:\n    | Array<string | RegExp>\n    | ((raw: string) => Array<string | RegExp>)\n    | false;\n  public guide?: boolean;\n  public placeholderChar?: string;\n  public pipe?: (\n    conformedValue: string,\n    config: TextMaskConfig,\n  ) => false | string | object;\n  public keepCharPositions?: boolean;\n  public showMask?: boolean;\n}\n\n// @dynamic\n@Directive({\n  exportAs: 'cntMaskPhone',\n  providers: [\n    {\n      multi: true,\n      provide: NG_VALUE_ACCESSOR,\n      useExisting: forwardRef(() => PhoneMaskDirective),\n    },\n  ],\n  selector: '[cntMaskPhone]',\n})\nexport class PhoneMaskDirective\n  implements ControlValueAccessor, OnChanges, OnInit {\n  @Input() public clean: boolean = true;\n  @Input() public maxNumberLength: number = 13;\n\n  public textMaskConfig: TextMaskConfig;\n\n  private textMaskInputElement: any;\n  private inputElement: HTMLInputElement;\n\n  /** Whether the user is creating a composition string (IME events). */\n  private composing: boolean = false;\n\n  constructor(\n    private renderer: Renderer2,\n    private elementRef: ElementRef,\n    @Inject(PLATFORM_ID) private platformId: object,\n    @Optional()\n    @Inject(COMPOSITION_BUFFER_MODE)\n    private compositionMode: boolean,\n  ) {\n    if (this.compositionMode == null) {\n      this.compositionMode = !this.isAndroid();\n    }\n  }\n\n  public onChange = (_: any) => {\n    // implement\n  };\n\n  public onTouched = () => {\n    // implement\n  };\n\n  ngOnInit(): void {\n    this.setupMask(true);\n    if (this.textMaskInputElement !== undefined) {\n      this.textMaskInputElement.update(this.inputElement.value);\n    }\n  }\n\n  ngOnChanges(changes: SimpleChanges): void {\n    this.setupMask(true);\n    if (this.textMaskInputElement !== undefined) {\n      this.textMaskInputElement.update(this.inputElement.value);\n    }\n  }\n\n  @HostListener('blur')\n  onBlur(): void {\n    this.onTouched();\n  }\n\n  writeValue(value: any): void {\n    this.setupMask();\n\n    // set the initial value for cases where the mask is disabled\n    const normalizedValue = value == null ? '' : value;\n    this.renderer.setProperty(this.inputElement, 'value', normalizedValue);\n\n    if (this.textMaskInputElement !== undefined) {\n      this.textMaskInputElement.update(value);\n    }\n  }\n\n  registerOnChange(fn: (_: any) => void): void {\n    this.onChange = fn;\n  }\n\n  registerOnTouched(fn: () => void): void {\n    this.onTouched = fn;\n  }\n\n  setDisabledState(isDisabled: boolean): void {\n    this.renderer.setProperty(\n      this.elementRef.nativeElement,\n      'disabled',\n      isDisabled,\n    );\n  }\n\n  @HostListener('input', ['$event.target.value'])\n  handleInput(value: string): void {\n    if (!this.compositionMode || (this.compositionMode && !this.composing)) {\n      this.setupMask();\n\n      if (this.textMaskInputElement !== undefined) {\n        this.textMaskInputElement.update(value);\n\n        // get the updated value\n        value = this.inputElement.value;\n\n        if (this.clean) {\n          this.onChange(clean(value));\n        } else {\n          this.onChange(value);\n        }\n      }\n    }\n  }\n\n  setupMask(create: boolean = false): void {\n    this.textMaskConfig = {\n      mask: mask(this.maxNumberLength),\n      guide: false,\n      placeholderChar: '_',\n      pipe: undefined,\n      keepCharPositions: false,\n    };\n    if (!this.inputElement) {\n      if (this.elementRef.nativeElement.tagName.toUpperCase() === 'INPUT') {\n        // `textMask` directive is used directly on an input element\n        this.inputElement = this.elementRef.nativeElement;\n      } else {\n        // `textMask` directive is used on an abstracted input element, `md-input-container`, etc\n        this.inputElement = this.elementRef.nativeElement.getElementsByTagName(\n          'INPUT',\n        )[0];\n      }\n    }\n\n    if (this.inputElement && create) {\n      this.textMaskInputElement = createTextMaskInputElement(\n        Object.assign({ inputElement: this.inputElement }, this.textMaskConfig),\n      );\n    }\n  }\n\n  @HostListener('compositionstart')\n  compositionStart(): void {\n    this.composing = true;\n  }\n\n  @HostListener('compositionend', ['$event.target.value'])\n  compositionEnd(value: any): void {\n    this.composing = false;\n    // tslint:disable-next-line: no-unused-expression\n    this.compositionMode && this.handleInput(value);\n  }\n\n  /**\n   * We must check whether the agent is Android because composition events\n   * behave differently between iOS and Android.\n   */\n  private isAndroid(): boolean {\n    if (\n      isPlatformBrowser(this.platformId) &&\n      window &&\n      (window as any).navigator\n    ) {\n      const userAgent = window.navigator.userAgent;\n      return /android (\\d+)/.test(userAgent.toLowerCase());\n    }\n\n    return false;\n  }\n}\n","import { Pipe, PipeTransform } from '@angular/core';\nimport { conformToMask } from 'angular2-text-mask';\nimport { mask } from './utils';\n\n@Pipe({\n  name: 'cntMaskPhone',\n})\nexport class PhoneMaskPipe implements PipeTransform {\n  transform(value: string): string {\n    if (!value) {\n      return '';\n    }\n\n    return conformToMask(value, mask(), { guide: false }).conformedValue;\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { TextMaskModule } from 'angular2-text-mask';\nimport { CardExpirationPipe } from './cc/card-expiration.pipe';\nimport { CCCvcFormatDirective } from './cc/directives/cc-cvc-format.directive';\nimport { CCExpiryFormatDirective } from './cc/directives/cc-expiry-format.directive';\nimport { CCNumberFormatDirective } from './cc/directives/cc-number-format.directive';\nimport { PhoneMaskDirective } from './phone/phone-mask.directive';\nimport { PhoneMaskPipe } from './phone/phone-mask.pipe';\n\n@NgModule({\n  imports: [TextMaskModule],\n  declarations: [\n    CCNumberFormatDirective,\n    CCExpiryFormatDirective,\n    CCCvcFormatDirective,\n    CardExpirationPipe,\n    PhoneMaskDirective,\n    PhoneMaskPipe,\n  ],\n  exports: [\n    CCNumberFormatDirective,\n    CCExpiryFormatDirective,\n    CCCvcFormatDirective,\n    CardExpirationPipe,\n    PhoneMaskDirective,\n    PhoneMaskPipe,\n  ],\n  providers: [CardExpirationPipe, PhoneMaskPipe],\n})\nexport class CntMasksModule {}\n","import { Directive, forwardRef } from '@angular/core';\nimport { NG_VALUE_ACCESSOR } from '@angular/forms';\n\n// @dynamic\n@Directive({\n  exportAs: 'cntMaskPhone',\n  providers: [\n    {\n      multi: true,\n      provide: NG_VALUE_ACCESSOR,\n      useExisting: forwardRef(() => PhoneMaskDirectiveMock),\n    },\n  ],\n  selector: '[cntMaskPhone]',\n})\nexport class PhoneMaskDirectiveMock {}\n","import { Pipe, PipeTransform } from '@angular/core';\n\n@Pipe({\n  name: 'cntMaskPhone',\n})\nexport class PhoneMaskPipeMock implements PipeTransform {\n  transform(value: string): string {\n    return value;\n  }\n}\n"]}