!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("angular2-text-mask"),require("@angular/common"),require("@angular/forms"),require("text-mask-core/dist/textMaskCore")):"function"==typeof define&&define.amd?define("cnt-masks",["exports","@angular/core","angular2-text-mask","@angular/common","@angular/forms","text-mask-core/dist/textMaskCore"],t):t((e=e||self)["cnt-masks"]={},e.ng.core,e.angular2TextMask,e.ng.common,e.ng.forms,e.textMaskCore)}(this,(function(e,t,n,r,i,a){"use strict";var o=function(){function e(){}return e.prototype.transform=function(e){return"number"!=typeof e&&(e+=""),"string"!=typeof e?e:(3===e.length&&(e="0"+e),e.substring(0,2)+"/"+e.substring(2))},e}();o.ɵfac=function(e){return new(e||o)},o.ɵpipe=t.ɵɵdefinePipe({name:"cardExpiration",type:o,pure:!0});Object.create;function u(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}var s,c;Object.create;var l=[].indexOf||function(e){for(var t=0,n=this.length;t<n;t++)if(t in this&&this[t]===e)return t;return-1};function f(e){var t,n,r,i=(e+"").replace(/\D/g,"");for(n=0,r=s.length;n<r;n++)if((t=s[n]).pattern.test(i))return t}function d(e){var t,n,r;for(n=0,r=s.length;n<r;n++)if((t=s[n]).type===e)return t}function h(e){try{if(e&&null!=e.selectionStart&&e.selectionStart!==e.selectionEnd)return!0}catch(e){e}return!1}function p(e,t,n){var r,i,a,o;if(e.length)try{for(var s=u(Array.from(e)),c=s.next();!c.done;c=s.next()){p(c.value,t,n)}}catch(e){r={error:e}}finally{try{c&&!c.done&&(i=s.return)&&i.call(s)}finally{if(r)throw r.error}}else{if(!t.match(" "))return e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent?(t="on"+t,e.attachEvent(t,n)):void(e["on"+t]=n);try{for(var l=u(Array.from(t.split(" "))),f=l.next();!f.done;f=l.next()){p(e,f.value,n)}}catch(e){a={error:e}}finally{try{f&&!f.done&&(o=l.return)&&o.call(l)}finally{if(a)throw a.error}}}}function v(e,t,n){var r;try{r=new CustomEvent(t,{detail:n})}catch(e){(r=document.createEvent("CustomEvent")).initCustomEvent?r.initCustomEvent(t,!0,!0,n):r.initEvent(t,!0,!0,n)}return e.dispatchEvent(r)}s=[{type:"amex",pattern:/^3[47]/,format:/(\d{1,4})(\d{1,6})?(\d{1,5})?/,length:[15],cvcLength:[4],luhn:!0},{type:"dankort",pattern:/^5019/,format:c=/(\d{1,4})/g,length:[16],cvcLength:[3],luhn:!0},{type:"hipercard",pattern:/^(384100|384140|384160|606282|637095|637568|60(?!11))/,format:c,length:[14,15,16,17,18,19],cvcLength:[3],luhn:!0},{type:"dinersclub",pattern:/^(36|38|30[0-5])/,format:/(\d{1,4})(\d{1,6})?(\d{1,4})?/,length:[14],cvcLength:[3],luhn:!0},{type:"discover",pattern:/^(6011|65|64[4-9]|622)/,format:c,length:[16],cvcLength:[3],luhn:!0},{type:"jcb",pattern:/^35/,format:c,length:[16],cvcLength:[3],luhn:!0},{type:"laser",pattern:/^(6706|6771|6709)/,format:c,length:[16,17,18,19],cvcLength:[3],luhn:!0},{type:"maestro",pattern:/^(5018|5020|5038|6304|6703|6708|6759|676[1-3])/,format:c,length:[12,13,14,15,16,17,18,19],cvcLength:[3],luhn:!0},{type:"mastercard",pattern:/^(5[1-5]|677189)|^(222[1-9]|2[3-6]\d{2}|27[0-1]\d|2720)/,format:c,length:[16],cvcLength:[3],luhn:!0},{type:"unionpay",pattern:/^62/,format:c,length:[16,17,18,19],cvcLength:[3],luhn:!1},{type:"visaelectron",pattern:/^4(026|17500|405|508|844|91[37])/,format:c,length:[16],cvcLength:[3],luhn:!0},{type:"elo",pattern:/^(4011(78|79)|43(1274|8935)|45(1416|7393|763(1|2))|50(4175|6699|67[0-7][0-9]|9000)|627780|63(6297|6368)|650(03([^4])|04([0-9])|05(0|1)|4(0[5-9]|3[0-9]|8[5-9]|9[0-9])|5([0-2][0-9]|3[0-8])|9([2-6][0-9]|7[0-8])|541|700|720|901)|651652|655000|655021)/,format:c,length:[16],cvcLength:[3],luhn:!0},{type:"visa",pattern:/^4/,format:c,length:[13,16,19],cvcLength:[3],luhn:!0}];var m=function(){function e(){}return e.restrictNumeric=function(e){return p(e,"keypress",w)},e.formatCardCVC=function(t){return e.restrictNumeric(t),p(t,"keypress",N),t},e.formatCardExpiry=function(t){var n,r;return e.restrictNumeric(t),t.length&&2===t.length?(n=t[0],r=t[1],this.formatCardExpiryMultiple(n,r)):(p(t,"keypress",D),p(t,"keypress",C),p(t,"keypress",M),p(t,"keypress",k),p(t,"keydown",x)),t},e.formatCardExpiryMultiple=function(e,t){return p(e,"keypress",I),p(e,"keypress",E),p(t,"keypress",L)},e.formatCardNumber=function(t,n){return e.restrictNumeric(t),p(t,"keypress",function(e){return function(t){var n,r=t.target,i=String.fromCharCode(t.which);if(/^\d+$/.test(i)&&!h(r)){var a=(r.value+i).replace(/\D/g,""),o=f(a);return n=16,o&&(n=o.length[o.length.length-1]),e&&(n=Math.min(n,e)),a.length<=n?void 0:t.preventDefault()}}}(n)),p(t,"keypress",function(e){return function(t){var n,r,i,a,o,u,s,c,l,d;if(r=String.fromCharCode(t.which),/^\d+$/.test(r)){for(n=f((c=(o=t.target).value)+r),a=(c.replace(/\D/g,"")+r).length,s=[16],n&&(s=n.length),e&&(s=s.filter((function(t){return t<=e}))),i=l=0,d=s.length;l<d;i=++l)if(!(a>=(u=s[i])&&s[i+1])&&a>=u)return;if(!h(o))return(n&&"amex"===n.type?/^(\d{4}|\d{4}\s\d{6})$/:/(?:^|\s)(\d{4})$/).test(c)?(t.preventDefault(),o.value=c+" "+r,v(o,"change")):void 0}}}(n)),p(t,"keydown",y),p(t,"keyup blur",$),p(t,"paste",g),p(t,"input",g),t},e}();function g(e){return setTimeout((function(){var t,n=e.target;if(n)return t=n.value,(t=m.fns.formatCardNumber(t))&&(n.value=t),v(n,"change")}))}function y(e){var t=e.target,n=t.value;if(!e.meta&&8===e.which&&!h(t))return/\d\s$/.test(n)?(e.preventDefault(),t.value=n.replace(/\d\s$/,""),v(t,"change")):/\s\d?$/.test(n)?(e.preventDefault(),t.value=n.replace(/\s\d?$/,""),v(t,"change")):void 0}function C(e){var t=String.fromCharCode(e.which);if(/^\d+$/.test(t)){var n=e.target,r=n.value+t;return/^\d$/.test(r)&&"0"!==r&&"1"!==r?(e.preventDefault(),n.value="0"+r+" / ",v(n,"change")):/^\d\d$/.test(r)?(e.preventDefault(),n.value=r+" / ",v(n,"change")):void 0}}function E(e){var t=String.fromCharCode(e.which);if(/^\d+$/.test(t)){var n=e.target,r=n.value+t;return/^\d$/.test(r)&&"0"!==r&&"1"!==r?(e.preventDefault(),n.value="0"+r,v(n,"change")):/^\d\d$/.test(r)?(e.preventDefault(),n.value=r,v(n,"change")):void 0}}function k(e){var t=String.fromCharCode(e.which);if(/^\d+$/.test(t)){var n=e.target,r=n.value;return/^\d\d$/.test(r)?(n.value=r+" / ",v(n,"change")):void 0}}function M(e){if("/"===String.fromCharCode(e.which)){var t=e.target,n=t.value;return/^\d$/.test(n)&&"0"!==n?(t.value="0"+n+" / ",v(t,"change")):void 0}}function x(e){if(!e.metaKey){var t=e.target,n=t.value;if(8===e.which&&!h(t))return/\d(\s|\/)+$/.test(n)?(e.preventDefault(),t.value=n.replace(/\d(\s|\/)*$/,""),v(t,"change")):/\s\/\s?\d?$/.test(n)?(e.preventDefault(),t.value=n.replace(/\s\/\s?\d?$/,""),v(t,"change")):void 0}}function w(e){var t;return!(!e.metaKey&&!e.ctrlKey)||(32===e.which?(e.preventDefault(),!1):0===e.which||(e.which<33||(t=String.fromCharCode(e.which),/[\d\s]/.test(t)?void 0:(e.preventDefault(),!1))))}function b(e,t){var n=e.target,r=String.fromCharCode(e.which);if(/^\d+$/.test(r)&&!h(n))return(n.value+r).replace(/\D/g,"").length>t?e.preventDefault():void 0}function D(e){return b(e,6)}function I(e){return b(e,2)}function L(e){return b(e,4)}function N(e){var t=e.target,n=String.fromCharCode(e.which);if(/^\d+$/.test(n)&&!h(t))return(t.value+n).length<=4?void 0:e.preventDefault()}function $(e){var t=e.target,n=t.value,r=m.fns.cardType(n)||"unknown";if(t&&t.classList&&!t.classList.contains(r))return t.classList.add("unknown"),s.forEach((function(e){return t.classList.remove(e.type)})),t.classList.add(r),"unknown"!==r?t.classList.contains("identified")&&t.classList.add("identified"):t.classList.remove("identified"),v(t,"payment.cardType",r)}m.fns={cardExpiryVal:function(e){var t,n,r;return t=(r=(e=e.replace(/\s/g,"")).split("/",2))[0],2===(null!=(n=r[1])?n.length:void 0)&&/^\d+$/.test(n)&&(n=(new Date).getFullYear().toString().slice(0,2)+n),{month:t,year:n}},validateCardNumber:function(e){var t,n;return e=(e+"").replace(/\s+|-/g,""),!!/^\d+$/.test(e)&&(!!(t=f(e))&&(n=e.length,l.call(t.length,n)>=0&&(!1===t.luhn||function(e){var t=!0,n=0;return(e+"").split("").reverse().forEach((function(e){var r=parseInt(e,10);return(t=!t)&&(r*=2),r>9&&(r-=9),n+=r})),n%10==0}(e))))},validateCardExpiry:function(e,t){var n,r,i;if("string"==typeof e&&l.call(e,"/")>=0&&(e=(i=m.fns.cardExpiryVal(e)).month,t=i.year),!e||!t)return!1;if(e=e.trim(),t=t.trim(),!/^\d+$/.test(e))return!1;if(!/^\d+$/.test(t))return!1;var a=parseInt(e,10);return!!(a&&a<=12)&&(2===t.length&&(t=(new Date).getFullYear().toString().slice(0,2)+t),r=new Date(parseInt(t,10),a),n=new Date,r.setMonth(r.getMonth()-1),r.setMonth(r.getMonth()+1,1),r>n)},validateCardCVC:function(e,t){var n,r;return e=e.trim(),!!/^\d+$/.test(e)&&(t&&d(t)?(r=d(t),n=e.length,l.call(null!=r?r.cvcLength:void 0,n)>=0):e.length>=3&&e.length<=4)},cardType:function(e){if(!e)return null;var t=f(e);return(null!=t?t.type:void 0)||null},formatCardNumber:function(e){var t,n,r;if(!(t=f(e)))return e;if(r=t.length[t.length.length-1],e=(e=e.replace(/\D/g,"")).slice(0,r),t.format.global){var i=e.match(t.format);return null!=i?i.join(" "):void 0}return null!=(n=t.format.exec(e))?(n.shift(),(n=n.filter((function(e){return e}))).join(" ")):void 0}};var T=function(e){this.el=e;var t=this.el.nativeElement;m.formatCardCVC(t),m.restrictNumeric(t)};T.ɵfac=function(e){return new(e||T)(t.ɵɵdirectiveInject(t.ElementRef))},T.ɵdir=t.ɵɵdefineDirective({type:T,selectors:[["","cntMaskCCCvc",""]]});var S=function(e){this.el=e;var t=this.el.nativeElement;m.formatCardExpiry(t),m.restrictNumeric(t)};S.ɵfac=function(e){return new(e||S)(t.ɵɵdirectiveInject(t.ElementRef))},S.ɵdir=t.ɵɵdefineDirective({type:S,selectors:[["","cntMaskCCExp",""]]});var j=function(){function e(e,t){this.renderer=e,this.el=t;var n=this.el.nativeElement;this.cardType="",m.formatCardNumber(n),m.restrictNumeric(n)}return e.prototype.onKeypress=function(e){var t=this.el.nativeElement,n=t.value;this.cardType=m.fns.cardType(n),this.cardType&&""!==this.cardType?this.renderer.removeClass(t,this.cardType):this.cardType=""},e}();j.ɵfac=function(e){return new(e||j)(t.ɵɵdirectiveInject(t.Renderer2),t.ɵɵdirectiveInject(t.ElementRef))},j.ɵdir=t.ɵɵdefineDirective({type:j,selectors:[["","cntMaskCCNum",""]],hostBindings:function(e,n){1&e&&t.ɵɵlistener("keypress",(function(e){return n.onKeypress(e)}))}});var P=function(){function e(){}return e.validateCardNumber=function(e){if(e&&!m.fns.validateCardNumber(e.value))return{cardNumber:!0};return null},e.validateCardExpiry=function(e){if(e){var t=e.value.split("/"),n=!1;if(t.length>1){var r=t[0].replace(/^\s+|\s+$/g,""),i=t[1].replace(/^\s+|\s+$/g,"");n=m.fns.validateCardExpiry(r,i)}if(!n)return{cardExpiry:!0}}return null},e.validateCardCvc=function(e){if(e&&!m.fns.validateCardCVC(e.value))return{cardCvc:!0};return null},e}(),O=function(e){return void 0===e&&(e=13),function(e){return["(",/[1-9]/,/\d/,/\d/,")"," ",/\d/,/\d/,/\d/,"-",/\d/,/\d/,/\d/,/\d/]}},R=function(){},F=function(){function e(e,t,n,r){this.renderer=e,this.elementRef=t,this.platformId=n,this.compositionMode=r,this.clean=!0,this.maxNumberLength=13,this.composing=!1,this.onChange=function(e){},this.onTouched=function(){},null==this.compositionMode&&(this.compositionMode=!this.isAndroid())}return e.prototype.ngOnInit=function(){this.setupMask(!0),void 0!==this.textMaskInputElement&&this.textMaskInputElement.update(this.inputElement.value)},e.prototype.ngOnChanges=function(e){this.setupMask(!0),void 0!==this.textMaskInputElement&&this.textMaskInputElement.update(this.inputElement.value)},e.prototype.onBlur=function(){this.onTouched()},e.prototype.writeValue=function(e){this.setupMask();var t=null==e?"":e;this.renderer.setProperty(this.inputElement,"value",t),void 0!==this.textMaskInputElement&&this.textMaskInputElement.update(e)},e.prototype.registerOnChange=function(e){this.onChange=e},e.prototype.registerOnTouched=function(e){this.onTouched=e},e.prototype.setDisabledState=function(e){this.renderer.setProperty(this.elementRef.nativeElement,"disabled",e)},e.prototype.handleInput=function(e){(!this.compositionMode||this.compositionMode&&!this.composing)&&(this.setupMask(),void 0!==this.textMaskInputElement&&(this.textMaskInputElement.update(e),e=this.inputElement.value,this.clean?this.onChange(e.toString().replace(/[^\d\^\+]/gm,"")):this.onChange(e)))},e.prototype.setupMask=function(e){void 0===e&&(e=!1),this.textMaskConfig={mask:O(this.maxNumberLength),guide:!1,placeholderChar:"_",pipe:void 0,keepCharPositions:!1},this.inputElement||("INPUT"===this.elementRef.nativeElement.tagName.toUpperCase()?this.inputElement=this.elementRef.nativeElement:this.inputElement=this.elementRef.nativeElement.getElementsByTagName("INPUT")[0]),this.inputElement&&e&&(this.textMaskInputElement=a.createTextMaskInputElement(Object.assign({inputElement:this.inputElement},this.textMaskConfig)))},e.prototype.compositionStart=function(){this.composing=!0},e.prototype.compositionEnd=function(e){this.composing=!1,this.compositionMode&&this.handleInput(e)},e.prototype.isAndroid=function(){if(r.isPlatformBrowser(this.platformId)&&window&&window.navigator){var e=window.navigator.userAgent;return/android (\d+)/.test(e.toLowerCase())}return!1},e}();F.ɵfac=function(e){return new(e||F)(t.ɵɵdirectiveInject(t.Renderer2),t.ɵɵdirectiveInject(t.ElementRef),t.ɵɵdirectiveInject(t.PLATFORM_ID),t.ɵɵdirectiveInject(i.COMPOSITION_BUFFER_MODE,8))},F.ɵdir=t.ɵɵdefineDirective({type:F,selectors:[["","cntMaskPhone",""]],hostBindings:function(e,n){1&e&&t.ɵɵlistener("blur",(function(){return n.onBlur()}))("input",(function(e){return n.handleInput(e.target.value)}))("compositionstart",(function(){return n.compositionStart()}))("compositionend",(function(e){return n.compositionEnd(e.target.value)}))},inputs:{clean:"clean",maxNumberLength:"maxNumberLength"},exportAs:["cntMaskPhone"],features:[t.ɵɵProvidersFeature([{multi:!0,provide:i.NG_VALUE_ACCESSOR,useExisting:t.forwardRef((function(){return F}))}]),t.ɵɵNgOnChangesFeature]});var V=function(){function e(){}return e.prototype.transform=function(e){return e?n.conformToMask(e,O(),{guide:!1}).conformedValue:""},e}();V.ɵfac=function(e){return new(e||V)},V.ɵpipe=t.ɵɵdefinePipe({name:"cntMaskPhone",type:V,pure:!0});var A=function(){};A.ɵmod=t.ɵɵdefineNgModule({type:A}),A.ɵinj=t.ɵɵdefineInjector({factory:function(e){return new(e||A)},providers:[o,V],imports:[[n.TextMaskModule]]}),("undefined"==typeof ngJitMode||ngJitMode)&&t.ɵɵsetNgModuleScope(A,{declarations:[j,S,T,o,F,V],imports:[n.TextMaskModule],exports:[j,S,T,o,F,V]}),e.CCCvcFormatDirective=T,e.CCExpiryFormatDirective=S,e.CCNumberFormatDirective=j,e.CardExpirationPipe=o,e.CntMasksModule=A,e.CreditCardValidator=P,e.PhoneMaskDirective=F,e.PhoneMaskPipe=V,e.TextMaskConfig=R,Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=cnt-masks.umd.min.js.map