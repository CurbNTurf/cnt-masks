!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("@angular/forms"),require("@angular/platform-browser"),require("@angular/common")):"function"==typeof define&&define.amd?define("cnt-masks",["exports","@angular/core","@angular/forms","@angular/platform-browser","@angular/common"],t):t((e=e||self)["cnt-masks"]={},e.ng.core,e.ng.forms,e.ng.platformBrowser,e.ng.common)}(this,(function(e,t,r,n,i){"use strict";var o=function(){function e(){}return e.prototype.transform=function(e){return"number"!=typeof e&&(e+=""),"string"!=typeof e?e:(3===e.length&&(e="0"+e),e.substring(0,2)+"/"+e.substring(2))},e}();o.decorators=[{type:t.Pipe,args:[{name:"cardExpiration"}]}];var a=function(){function e(){}return e.prototype.transform=function(e){return e},e}();a.decorators=[{type:t.Pipe,args:[{name:"cardExpiration"}]}];Object.create;function s(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}var u,c;Object.create;var l=[].indexOf||function(e){for(var t=0,r=this.length;t<r;t++)if(t in this&&this[t]===e)return t;return-1};function p(e){var t,r,n,i=(e+"").replace(/\D/g,"");for(r=0,n=u.length;r<n;r++)if((t=u[r]).pattern.test(i))return t}function h(e){var t,r,n;for(r=0,n=u.length;r<n;r++)if((t=u[r]).type===e)return t}function f(e){try{if(e&&null!=e.selectionStart&&e.selectionStart!==e.selectionEnd)return!0}catch(e){e}return!1}function d(e,t,r){var n,i,o,a;if(e.length)try{for(var u=s(Array.from(e)),c=u.next();!c.done;c=u.next()){d(c.value,t,r)}}catch(e){n={error:e}}finally{try{c&&!c.done&&(i=u.return)&&i.call(u)}finally{if(n)throw n.error}}else{if(!t.match(" "))return e.addEventListener?e.addEventListener(t,r,!1):e.attachEvent?(t="on"+t,e.attachEvent(t,r)):void(e["on"+t]=r);try{for(var l=s(Array.from(t.split(" "))),p=l.next();!p.done;p=l.next()){d(e,p.value,r)}}catch(e){o={error:e}}finally{try{p&&!p.done&&(a=l.return)&&a.call(l)}finally{if(o)throw o.error}}}}function v(e,t,r){var n;try{n=new CustomEvent(t,{detail:r})}catch(e){(n=document.createEvent("CustomEvent")).initCustomEvent?n.initCustomEvent(t,!0,!0,r):n.initEvent(t,!0,!0,r)}return e.dispatchEvent(n)}u=[{type:"amex",pattern:/^3[47]/,format:/(\d{1,4})(\d{1,6})?(\d{1,5})?/,length:[15],cvcLength:[4],luhn:!0},{type:"dankort",pattern:/^5019/,format:c=/(\d{1,4})/g,length:[16],cvcLength:[3],luhn:!0},{type:"hipercard",pattern:/^(384100|384140|384160|606282|637095|637568|60(?!11))/,format:c,length:[14,15,16,17,18,19],cvcLength:[3],luhn:!0},{type:"dinersclub",pattern:/^(36|38|30[0-5])/,format:/(\d{1,4})(\d{1,6})?(\d{1,4})?/,length:[14],cvcLength:[3],luhn:!0},{type:"discover",pattern:/^(6011|65|64[4-9]|622)/,format:c,length:[16],cvcLength:[3],luhn:!0},{type:"jcb",pattern:/^35/,format:c,length:[16],cvcLength:[3],luhn:!0},{type:"laser",pattern:/^(6706|6771|6709)/,format:c,length:[16,17,18,19],cvcLength:[3],luhn:!0},{type:"maestro",pattern:/^(5018|5020|5038|6304|6703|6708|6759|676[1-3])/,format:c,length:[12,13,14,15,16,17,18,19],cvcLength:[3],luhn:!0},{type:"mastercard",pattern:/^(5[1-5]|677189)|^(222[1-9]|2[3-6]\d{2}|27[0-1]\d|2720)/,format:c,length:[16],cvcLength:[3],luhn:!0},{type:"unionpay",pattern:/^62/,format:c,length:[16,17,18,19],cvcLength:[3],luhn:!1},{type:"visaelectron",pattern:/^4(026|17500|405|508|844|91[37])/,format:c,length:[16],cvcLength:[3],luhn:!0},{type:"elo",pattern:/^(4011(78|79)|43(1274|8935)|45(1416|7393|763(1|2))|50(4175|6699|67[0-7][0-9]|9000)|627780|63(6297|6368)|650(03([^4])|04([0-9])|05(0|1)|4(0[5-9]|3[0-9]|8[5-9]|9[0-9])|5([0-2][0-9]|3[0-8])|9([2-6][0-9]|7[0-8])|541|700|720|901)|651652|655000|655021)/,format:c,length:[16],cvcLength:[3],luhn:!0},{type:"visa",pattern:/^4/,format:c,length:[13,16,19],cvcLength:[3],luhn:!0}];var m=function(){function e(){}return e.restrictNumeric=function(e){return d(e,"keypress",w)},e.formatCardCVC=function(t){return e.restrictNumeric(t),d(t,"keypress",O),t},e.formatCardExpiry=function(t){var r,n;return e.restrictNumeric(t),t.length&&2===t.length?(r=t[0],n=t[1],this.formatCardExpiryMultiple(r,n)):(d(t,"keypress",P),d(t,"keypress",C),d(t,"keypress",M),d(t,"keypress",k),d(t,"keydown",x)),t},e.formatCardExpiryMultiple=function(e,t){return d(e,"keypress",T),d(e,"keypress",E),d(t,"keypress",D)},e.formatCardNumber=function(t,r){return e.restrictNumeric(t),d(t,"keypress",function(e){return function(t){var r,n=t.target,i=String.fromCharCode(t.which);if(/^\d+$/.test(i)&&!f(n)){var o=(n.value+i).replace(/\D/g,""),a=p(o);return r=16,a&&(r=a.length[a.length.length-1]),e&&(r=Math.min(r,e)),o.length<=r?void 0:t.preventDefault()}}}(r)),d(t,"keypress",function(e){return function(t){var r,n,i,o,a,s,u,c,l,h;if(n=String.fromCharCode(t.which),/^\d+$/.test(n)){for(r=p((c=(a=t.target).value)+n),o=(c.replace(/\D/g,"")+n).length,u=[16],r&&(u=r.length),e&&(u=u.filter((function(t){return t<=e}))),i=l=0,h=u.length;l<h;i=++l)if(!(o>=(s=u[i])&&u[i+1])&&o>=s)return;if(!f(a))return(r&&"amex"===r.type?/^(\d{4}|\d{4}\s\d{6})$/:/(?:^|\s)(\d{4})$/).test(c)?(t.preventDefault(),a.value=c+" "+n,v(a,"change")):void 0}}}(r)),d(t,"keydown",y),d(t,"keyup blur",N),d(t,"paste",g),d(t,"input",g),t},e}();function g(e){return setTimeout((function(){var t,r=e.target;if(r)return t=r.value,(t=m.fns.formatCardNumber(t))&&(r.value=t),v(r,"change")}))}function y(e){var t=e.target,r=t.value;if(!e.meta&&8===e.which&&!f(t))return/\d\s$/.test(r)?(e.preventDefault(),t.value=r.replace(/\d\s$/,""),v(t,"change")):/\s\d?$/.test(r)?(e.preventDefault(),t.value=r.replace(/\s\d?$/,""),v(t,"change")):void 0}function C(e){var t=String.fromCharCode(e.which);if(/^\d+$/.test(t)){var r=e.target,n=r.value+t;return/^\d$/.test(n)&&"0"!==n&&"1"!==n?(e.preventDefault(),r.value="0"+n+" / ",v(r,"change")):/^\d\d$/.test(n)?(e.preventDefault(),r.value=n+" / ",v(r,"change")):void 0}}function E(e){var t=String.fromCharCode(e.which);if(/^\d+$/.test(t)){var r=e.target,n=r.value+t;return/^\d$/.test(n)&&"0"!==n&&"1"!==n?(e.preventDefault(),r.value="0"+n,v(r,"change")):/^\d\d$/.test(n)?(e.preventDefault(),r.value=n,v(r,"change")):void 0}}function k(e){var t=String.fromCharCode(e.which);if(/^\d+$/.test(t)){var r=e.target,n=r.value;return/^\d\d$/.test(n)?(r.value=n+" / ",v(r,"change")):void 0}}function M(e){if("/"===String.fromCharCode(e.which)){var t=e.target,r=t.value;return/^\d$/.test(r)&&"0"!==r?(t.value="0"+r+" / ",v(t,"change")):void 0}}function x(e){if(!e.metaKey){var t=e.target,r=t.value;if(8===e.which&&!f(t))return/\d(\s|\/)+$/.test(r)?(e.preventDefault(),t.value=r.replace(/\d(\s|\/)*$/,""),v(t,"change")):/\s\/\s?\d?$/.test(r)?(e.preventDefault(),t.value=r.replace(/\s\/\s?\d?$/,""),v(t,"change")):void 0}}function w(e){var t;return!(!e.metaKey&&!e.ctrlKey)||(32===e.which?(e.preventDefault(),!1):0===e.which||(e.which<33||(t=String.fromCharCode(e.which),/[\d\s]/.test(t)?void 0:(e.preventDefault(),!1))))}function b(e,t){var r=e.target,n=String.fromCharCode(e.which);if(/^\d+$/.test(n)&&!f(r))return(r.value+n).replace(/\D/g,"").length>t?e.preventDefault():void 0}function P(e){return b(e,6)}function T(e){return b(e,2)}function D(e){return b(e,4)}function O(e){var t=e.target,r=String.fromCharCode(e.which);if(/^\d+$/.test(r)&&!f(t))return(t.value+r).length<=4?void 0:e.preventDefault()}function N(e){var t=e.target,r=t.value,n=m.fns.cardType(r)||"unknown";if(t&&t.classList&&!t.classList.contains(n))return t.classList.add("unknown"),u.forEach((function(e){return t.classList.remove(e.type)})),t.classList.add(n),"unknown"!==n?t.classList.contains("identified")&&t.classList.add("identified"):t.classList.remove("identified"),v(t,"payment.cardType",n)}m.fns={cardExpiryVal:function(e){var t,r,n;return t=(n=(e=e.replace(/\s/g,"")).split("/",2))[0],2===(null!=(r=n[1])?r.length:void 0)&&/^\d+$/.test(r)&&(r=(new Date).getFullYear().toString().slice(0,2)+r),{month:t,year:r}},validateCardNumber:function(e){var t,r;return e=(e+"").replace(/\s+|-/g,""),!!/^\d+$/.test(e)&&(!!(t=p(e))&&(r=e.length,l.call(t.length,r)>=0&&(!1===t.luhn||function(e){var t=!0,r=0;return(e+"").split("").reverse().forEach((function(e){var n=parseInt(e,10);return(t=!t)&&(n*=2),n>9&&(n-=9),r+=n})),r%10==0}(e))))},validateCardExpiry:function(e,t){var r,n,i;if("string"==typeof e&&l.call(e,"/")>=0&&(e=(i=m.fns.cardExpiryVal(e)).month,t=i.year),!e||!t)return!1;if(e=e.trim(),t=t.trim(),!/^\d+$/.test(e))return!1;if(!/^\d+$/.test(t))return!1;var o=parseInt(e,10);return!!(o&&o<=12)&&(2===t.length&&(t=(new Date).getFullYear().toString().slice(0,2)+t),n=new Date(parseInt(t,10),o),r=new Date,n.setMonth(n.getMonth()-1),n.setMonth(n.getMonth()+1,1),n>r)},validateCardCVC:function(e,t){var r,n;return e=e.trim(),!!/^\d+$/.test(e)&&(t&&h(t)?(n=h(t),r=e.length,l.call(null!=n?n.cvcLength:void 0,r)>=0):e.length>=3&&e.length<=4)},cardType:function(e){if(!e)return null;var t=p(e);return(null!=t?t.type:void 0)||null},formatCardNumber:function(e){var t,r,n;if(!(t=p(e)))return e;if(n=t.length[t.length.length-1],e=(e=e.replace(/\D/g,"")).slice(0,n),t.format.global){var i=e.match(t.format);return null!=i?i.join(" "):void 0}return null!=(r=t.format.exec(e))?(r.shift(),(r=r.filter((function(e){return e}))).join(" ")):void 0}};var I=function(e){this.el=e;var t=this.el.nativeElement;m.formatCardCVC(t),m.restrictNumeric(t)};I.decorators=[{type:t.Directive,args:[{selector:"[cntMaskCCCvc]"}]}],I.ctorParameters=function(){return[{type:t.ElementRef}]};var _=function(){};_.decorators=[{type:t.Directive,args:[{selector:"[cntMaskCCCvc]"}]}];var L=function(e){this.el=e;var t=this.el.nativeElement;m.formatCardExpiry(t),m.restrictNumeric(t)};L.decorators=[{type:t.Directive,args:[{selector:"[cntMaskCCExp]"}]}],L.ctorParameters=function(){return[{type:t.ElementRef}]};var S=function(){};S.decorators=[{type:t.Directive,args:[{selector:"[cntMaskCCExp]"}]}];var $=function(){function e(e,t){this.renderer=e,this.el=t;var r=this.el.nativeElement;this.cardType="",m.formatCardNumber(r),m.restrictNumeric(r)}return e.prototype.onKeypress=function(e){var t=this.el.nativeElement,r=t.value;this.cardType=m.fns.cardType(r),this.cardType&&""!==this.cardType?this.renderer.removeClass(t,this.cardType):this.cardType=""},e}();$.decorators=[{type:t.Directive,args:[{selector:"[cntMaskCCNum]"}]}],$.ctorParameters=function(){return[{type:t.Renderer2},{type:t.ElementRef}]},$.propDecorators={onKeypress:[{type:t.HostListener,args:["keypress",["$event"]]}]};var R=function(){};R.decorators=[{type:t.Directive,args:[{selector:"[cntMaskCCNum]"}]}];var V=function(){function e(){}return e.validateCardNumber=function(e){if(e&&!m.fns.validateCardNumber(e.value))return{cardNumber:!0};return null},e.validateCardExpiry=function(e){if(e){var t=e.value.split("/"),r=!1;if(t.length>1){var n=t[0].replace(/^\s+|\s+$/g,""),i=t[1].replace(/^\s+|\s+$/g,"");r=m.fns.validateCardExpiry(n,i)}if(!r)return{cardExpiry:!0}}return null},e.validateCardCvc=function(e){if(e&&!m.fns.validateCardCVC(e.value))return{cardCvc:!0};return null},e}(),A=[],j="";var F="_",U=[],B="";function q(e){for(var t,r=[];-1!==(t=e.indexOf("[]"));)r.push(t),e.splice(t,1);return{maskWithoutCaretTraps:e,indexes:r}}function H(e,t,r){if(void 0===e&&(e=B),void 0===t&&(t=U),void 0===r&&(r={}),!Array.isArray(t)){if("function"!=typeof t)throw new Error("Text-mask:conformToMask; The mask property must be an array.");t=q(t=t(e,r)).maskWithoutCaretTraps}var n=r.guide,i=void 0===n||n,o=r.previousConformedValue,a=void 0===o?B:o,s=r.placeholderChar,u=void 0===s?F:s,c=r.placeholder,l=void 0===c?function(e,t){if(void 0===e&&(e=U),void 0===t&&(t=F),!Array.isArray(e))throw new Error("Text-mask:convertMaskToPlaceholder; The mask property must be an array.");if(-1!==e.indexOf(t))throw new Error("Placeholder character must not be used as part of the mask. Please specify a character that is not present in your mask as your placeholder character.\n\nThe placeholder character that was received is: "+JSON.stringify(t)+"\n\nThe mask that was received is: "+JSON.stringify(e));return e.map((function(e){return e instanceof RegExp?t:e})).join("")}(t,u):c,p=r.currentCaretPosition,h=r.keepCharPositions,f=!1===i&&void 0!==a,d=e.length,v=a.length,m=l.length,g=t.length,y=d-v,C=y>0,E=p+(C?-y:0),k=E+Math.abs(y);if(!0===h&&!C){for(var M=B,x=E;x<k;x++)l[x]===u&&(M+=u);e=e.slice(0,E)+M+e.slice(E,d)}var w=e.split(B).map((function(e,t){return{char:e,isNew:t>=E&&t<k}}));for(x=d-1;x>=0;x--){var b=w[x].char;if(b!==u)b===l[x>=E&&v===g?x-y:x]&&w.splice(x,1)}var P=B,T=!1;e:for(x=0;x<m;x++){var D=l[x];if(D===u){if(w.length>0)for(;w.length>0;){var O=w.shift(),N=O.char,I=O.isNew;if(N===u&&!0!==f){P+=u;continue e}if(t[x].test(N)){if(!0===h&&!1!==I&&a!==B&&!1!==i&&C){for(var _=w.length,L=null,S=0;S<_;S++){var $=w[S];if($.char!==u&&!1===$.isNew)break;if($.char===u){L=S;break}}null!==L?(P+=N,w.splice(L,1)):x--}else P+=N;continue e}T=!0}!1===f&&(P+=l.substr(x,m));break}P+=D}if(f&&!1===C){var R=null;for(x=0;x<P.length;x++)l[x]===u&&(R=x);P=null!==R?P.substr(0,R+1):B}return{conformedValue:P,meta:{someCharsRejected:T}}}var J=[],K="undefined"!=typeof navigator&&/Android/i.test(navigator.userAgent),G="undefined"!=typeof requestAnimationFrame?requestAnimationFrame:setTimeout;function W(e){return"string"==typeof e||e instanceof String}function Y(e,t){if(void 0===e&&(e=J),void 0===t&&(t=F),!Array.isArray(e))throw new Error("Text-mask:convertMaskToPlaceholder; The mask property must be an array.");if(-1!==e.indexOf(t))throw new Error("Placeholder character must not be used as part of the mask. Please specify a character that is not present in your mask as your placeholder character.\n\nThe placeholder character that was received is: "+JSON.stringify(t)+"\n\nThe mask that was received is: "+JSON.stringify(e));return e.map((function(e){return e instanceof RegExp?t:e})).join("")}function z(e){var t={previousConformedValue:void 0,previousPlaceholder:void 0};return{state:t,update:function(r,n){var i,o,a=void 0===n?e:n,s=a.inputElement,u=a.mask,c=a.guide,l=a.pipe,p=a.placeholderChar,h=void 0===p?F:p,f=a.keepCharPositions,d=void 0!==f&&f,v=a.showMask,m=void 0!==v&&v;if((void 0===r&&(r=s.value),r!==t.previousConformedValue)&&("object"==typeof u&&void 0!==u.pipe&&void 0!==u.mask&&(l=u.pipe,u=u.mask),u instanceof Array&&(i=Y(u,h)),!1!==u)){var g,y=function(e){if(W(e))return e;if("number"!=typeof(t=e)||void 0!==t.length||isNaN(t)){if(null==e)return"";throw new Error("The 'value' provided to Text Mask needs to be a string or a number. The value received was:\n\n "+JSON.stringify(e))}return String(e);var t}(r),C=s.selectionEnd,E=t.previousConformedValue,k=t.previousPlaceholder;if("function"==typeof u){if(!1===(o=u(y,{currentCaretPosition:C,previousConformedValue:E,placeholderChar:h})))return;var M=q(o),x=M.maskWithoutCaretTraps;g=M.indexes,i=Y(o=x,h)}else o=u;var w={previousConformedValue:E,guide:c,placeholderChar:h,pipe:l,placeholder:i,currentCaretPosition:C,keepCharPositions:d},b=H(y,o,w).conformedValue,P="function"==typeof l,T={};P&&(!1===(T=l(b,Object.assign({rawValue:y},w)))?T={value:E,rejected:!0}:W(T)&&(T={value:T}));var D,O,N=P?T.value:b,I=function(e){var t=e.previousConformedValue,r=void 0===t?j:t,n=e.previousPlaceholder,i=void 0===n?j:n,o=e.currentCaretPosition,a=void 0===o?0:o,s=e.conformedValue,u=e.rawValue,c=e.placeholderChar,l=e.placeholder,p=e.indexesOfPipedChars,h=void 0===p?A:p,f=e.caretTrapIndexes,d=void 0===f?A:f;if(0===a||!u.length)return 0;var v=u.length,m=r.length,g=l.length,y=s.length,C=v-m,E=C>0;if(C>1&&!E&&0!==m)return a;var k,M,x=0;if(!E||r!==s&&s!==l){var w=s.toLowerCase(),b=u.toLowerCase().substr(0,a).split(j).filter((function(e){return-1!==w.indexOf(e)}));M=b[b.length-1];var P=i.substr(0,b.length).split(j).filter((function(e){return e!==c})).length,T=l.substr(0,b.length).split(j).filter((function(e){return e!==c})).length!==P,D=void 0!==i[b.length-1]&&void 0!==l[b.length-2]&&i[b.length-1]!==c&&i[b.length-1]!==l[b.length-1]&&i[b.length-1]===l[b.length-2];!E&&(T||D)&&P>0&&l.indexOf(M)>-1&&void 0!==u[a]&&(k=!0,M=u[a]);for(var O=h.map((function(e){return w[e]})).filter((function(e){return e===M})).length,N=b.filter((function(e){return e===M})).length,I=l.substr(0,l.indexOf(c)).split(j).filter((function(e,t){return e===M&&u[t]!==e})).length+N+O+(k?1:0),_=0,L=0;L<y&&(x=L+1,w[L]===M&&_++,!(_>=I));L++);}else x=a-C;if(E){var S=x;for(L=x;L<=g;L++)if(l[L]===c&&(S=L),l[L]===c||-1!==d.indexOf(L)||L===g)return S}else if(k){for(L=x-1;L>=0;L--)if(s[L]===M||-1!==d.indexOf(L)||0===L)return L}else for(L=x;L>=0;L--)if(l[L-1]===c||-1!==d.indexOf(L)||0===L)return L}({previousConformedValue:E,previousPlaceholder:k,conformedValue:N,placeholder:i,rawValue:y,currentCaretPosition:C,placeholderChar:h,indexesOfPipedChars:T.indexesOfPipedChars,caretTrapIndexes:g}),_=N===i&&0===I?m?i:"":N;if(t.previousConformedValue=_,t.previousPlaceholder=i,s.value!==_)s.value=_,D=s,O=I,document.activeElement===D&&(K?G((function(){return D.setSelectionRange(O,O,"none")}),0):D.setSelectionRange(O,O,"none"))}}}}var Q={provide:r.NG_VALUE_ACCESSOR,useExisting:t.forwardRef((function(){return X})),multi:!0};var X=function(){function e(e,t,r){var i;this._renderer=e,this._elementRef=t,this._compositionMode=r,this.textMaskConfig={mask:[],guide:!0,placeholderChar:"_",pipe:void 0,keepCharPositions:!1},this._composing=!1,this.onChange=function(e){},this.onTouched=function(){},null==this._compositionMode&&(this._compositionMode=(i=n.ɵgetDOM()?n.ɵgetDOM().getUserAgent():"",!/android (\d+)/.test(i.toLowerCase())))}return e.prototype.ngOnChanges=function(e){this._setupMask(!0),void 0!==this.textMaskInputElement&&this.textMaskInputElement.update(this.inputElement.value)},e.prototype.writeValue=function(e){this._setupMask();var t=null==e?"":e;this._renderer.setProperty(this.inputElement,"value",t),void 0!==this.textMaskInputElement&&this.textMaskInputElement.update(e)},e.prototype.registerOnChange=function(e){this.onChange=e},e.prototype.registerOnTouched=function(e){this.onTouched=e},e.prototype.setDisabledState=function(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)},e.prototype._handleInput=function(e){(!this._compositionMode||this._compositionMode&&!this._composing)&&(this._setupMask(),void 0!==this.textMaskInputElement&&(this.textMaskInputElement.update(e),e=this.inputElement.value,this.onChange(e)))},e.prototype._setupMask=function(e){void 0===e&&(e=!1),this.inputElement||("INPUT"===this._elementRef.nativeElement.tagName.toUpperCase()?this.inputElement=this._elementRef.nativeElement:this.inputElement=this._elementRef.nativeElement.getElementsByTagName("INPUT")[0]),this.inputElement&&e&&(this.textMaskInputElement=z(Object.assign({inputElement:this.inputElement},this.textMaskConfig)))},e.prototype._compositionStart=function(){this._composing=!0},e.prototype._compositionEnd=function(e){this._composing=!1,this._compositionMode&&this._handleInput(e)},e}();X.decorators=[{type:t.Directive,args:[{host:{"(input)":"_handleInput($event.target.value)","(blur)":"onTouched()","(compositionstart)":"_compositionStart()","(compositionend)":"_compositionEnd($event.target.value)"},selector:"[textMask]",exportAs:"textMask",providers:[Q]}]}],X.ctorParameters=function(){return[{type:t.Renderer2},{type:t.ElementRef},{type:Boolean,decorators:[{type:t.Optional},{type:t.Inject,args:[r.COMPOSITION_BUFFER_MODE]}]}]},X.propDecorators={textMaskConfig:[{type:t.Input,args:["textMask"]}]};var Z=function(){};Z.decorators=[{type:t.NgModule,args:[{declarations:[X],exports:[X]}]}];var ee=function(e){return void 0===e&&(e=13),function(e){return["(",/[1-9]/,/\d/,/\d/,")"," ",/\d/,/\d/,/\d/,"-",/\d/,/\d/,/\d/,/\d/]}},te=function(){},re=function(){function e(e,t,r,n){this.renderer=e,this.elementRef=t,this.platformId=r,this.compositionMode=n,this.clean=!0,this.maxNumberLength=13,this.composing=!1,this.onChange=function(e){},this.onTouched=function(){},null==this.compositionMode&&(this.compositionMode=!this.isAndroid())}return e.prototype.ngOnInit=function(){this.setupMask(!0),void 0!==this.textMaskInputElement&&this.textMaskInputElement.update(this.inputElement.value)},e.prototype.ngOnChanges=function(e){this.setupMask(!0),void 0!==this.textMaskInputElement&&this.textMaskInputElement.update(this.inputElement.value)},e.prototype.onBlur=function(){this.onTouched()},e.prototype.writeValue=function(e){this.setupMask();var t=null==e?"":e;this.renderer.setProperty(this.inputElement,"value",t),void 0!==this.textMaskInputElement&&this.textMaskInputElement.update(e)},e.prototype.registerOnChange=function(e){this.onChange=e},e.prototype.registerOnTouched=function(e){this.onTouched=e},e.prototype.setDisabledState=function(e){this.renderer.setProperty(this.elementRef.nativeElement,"disabled",e)},e.prototype.handleInput=function(e){(!this.compositionMode||this.compositionMode&&!this.composing)&&(this.setupMask(),void 0!==this.textMaskInputElement&&(this.textMaskInputElement.update(e),e=this.inputElement.value,this.clean?this.onChange(e.toString().replace(/[^\d\^\+]/gm,"")):this.onChange(e)))},e.prototype.setupMask=function(e){void 0===e&&(e=!1),this.textMaskConfig={mask:ee(this.maxNumberLength),guide:!1,placeholderChar:"_",pipe:void 0,keepCharPositions:!1},this.inputElement||("INPUT"===this.elementRef.nativeElement.tagName.toUpperCase()?this.inputElement=this.elementRef.nativeElement:this.inputElement=this.elementRef.nativeElement.getElementsByTagName("INPUT")[0]),this.inputElement&&e&&(this.textMaskInputElement=z(Object.assign({inputElement:this.inputElement},this.textMaskConfig)))},e.prototype.compositionStart=function(){this.composing=!0},e.prototype.compositionEnd=function(e){this.composing=!1,this.compositionMode&&this.handleInput(e)},e.prototype.isAndroid=function(){if(i.isPlatformBrowser(this.platformId)&&window&&window.navigator){var e=window.navigator.userAgent;return/android (\d+)/.test(e.toLowerCase())}return!1},e}();re.decorators=[{type:t.Directive,args:[{exportAs:"cntMaskPhone",providers:[{multi:!0,provide:r.NG_VALUE_ACCESSOR,useExisting:t.forwardRef((function(){return re}))}],selector:"[cntMaskPhone]"}]}],re.ctorParameters=function(){return[{type:t.Renderer2},{type:t.ElementRef},{type:Object,decorators:[{type:t.Inject,args:[t.PLATFORM_ID]}]},{type:Boolean,decorators:[{type:t.Optional},{type:t.Inject,args:[r.COMPOSITION_BUFFER_MODE]}]}]},re.propDecorators={clean:[{type:t.Input}],maxNumberLength:[{type:t.Input}],onBlur:[{type:t.HostListener,args:["blur"]}],handleInput:[{type:t.HostListener,args:["input",["$event.target.value"]]}],compositionStart:[{type:t.HostListener,args:["compositionstart"]}],compositionEnd:[{type:t.HostListener,args:["compositionend",["$event.target.value"]]}]};var ne=function(){function e(){}return e.prototype.transform=function(e){return e?H(e,ee(),{guide:!1}).conformedValue:""},e}();ne.decorators=[{type:t.Pipe,args:[{name:"cntMaskPhone"}]}];var ie=function(){};ie.decorators=[{type:t.NgModule,args:[{imports:[Z],declarations:[$,L,I,o,re,ne],exports:[$,L,I,o,re,ne],providers:[o,ne]}]}];var oe=function(){};oe.decorators=[{type:t.Directive,args:[{exportAs:"cntMaskPhone",providers:[{multi:!0,provide:r.NG_VALUE_ACCESSOR,useExisting:t.forwardRef((function(){return oe}))}],selector:"[cntMaskPhone]"}]}];var ae=function(){function e(){}return e.prototype.transform=function(e){return e},e}();ae.decorators=[{type:t.Pipe,args:[{name:"cntMaskPhone"}]}],e.CCCvcFormatDirective=I,e.CCCvcFormatDirectiveMock=_,e.CCExpiryFormatDirective=L,e.CCExpiryFormatDirectiveMock=S,e.CCNumberFormatDirective=$,e.CCNumberFormatDirectiveMock=R,e.CardExpirationPipe=o,e.CardExpirationPipeMock=a,e.CntMasksModule=ie,e.CreditCardValidator=V,e.PhoneMaskDirective=re,e.PhoneMaskDirectiveMock=oe,e.PhoneMaskPipe=ne,e.PhoneMaskPipeMock=ae,e.TextMaskConfig=te,e.ɵa=Q,e.ɵb=X,e.ɵc=Z,Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=cnt-masks.umd.min.js.map